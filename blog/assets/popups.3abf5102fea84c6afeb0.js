/*! For license information please see popups.3abf5102fea84c6afeb0.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{548:function(t,e,i){"use strict";var s,n;s=i(45),n=i(19),n.fn.ttDate=function(t,e){var i,o,r,a,l,c;return({seconds:c,minutes:a,hours:r,days:i,months:l}=s(e,{seconds:{format:"s",time:1e3},minutes:{format:"m",time:6e4},hours:{format:"h",time:36e5},days:{format:"d",time:864e5},months:{format:"L",time:2592e6}})),(o=Math.abs(this.diff(t||n())))<=c.time?n.duration(1e3).seconds()+c.format:o<=a.time?n.duration(o).seconds()+c.format:o<=r.time?n.duration(o).minutes()+a.format:o<=i.time?n.duration(o).hours()+r.format:o<=l.time?n.duration(o).days()+i.format:this.format(l.format)}},549:function(t,e,i){"use strict";(function(t){var s=i(39),n=i(154),o=i(82),r=i(3),a=i.n(r),l=i(24),c=i.n(l),u=i(33),d=i.n(u),h=i(115),p=i.n(h),_=(i(53),i(4),i(63)),m=i.n(_),g=(i(52),i(85)),f=i.n(g);e.a={components:{Icon:s.a,Userpic:n.a,Dropdown:o.a},props:["name","type","placeholder","icon","value","queryValue","action","getter","params","queryParams","changesMode","loading"],data:function(){return{focus:!1,querying:!1,query:"",val:null,selected:0}},computed:{suggests:function(){return d()(this.getter)?this.getter(this.query):this.$store.getters[this.getter]},isLoading:function(){return this.querying||this.loading},openSuggests:function(){return this.query&&this.focus&&!this.loading&&!c()(this.suggests)},queryWidth:function(){return.75*((this.query||"").length+1)+"em"},pr:function(){return a()({value:"id",label:"label"},this.params)}},filters:{unescape:function(t){return f()(t)}},mounted:function(){return this.queryDebounced=p()(()=>this.fetch(),400)},watch:{value:{handler:"selectValue",immediate:!0},queryValue:function(){return this.query=this.queryValue},loading:function(){if(!this.loading)return this.$refs.query.blur(),this.onBlur()}},methods:{fetch:function(){return this.querying=!0,this.$store.dispatch(this.action,a()(this.queryParams||{},{query:this.query})).then(()=>this.querying=!1,()=>this.querying=!1)},setFocus:function(){return this.$refs.query.focus(),this.onFocus()},selectDown:function(){return c()(this.suggests)?this.selectValue():this.suggests[this.selected+1]?this.selected++:void 0},selectUp:function(){return c()(this.suggests)?this.selectValue():this.suggests[this.selected-1]?this.selected--:void 0},selectValue:function(){var t,e;return e=null,t=0,this.value&&!c()(this.suggests)&&(t=m()(this.suggests,[this.pr.value,this.value]),e=this.suggests[t]),t<0&&(t=0),this.selected=t,this.value?this.val=e?e[this.pr.label]:null:this.val=null},change:function(t){var e,i,s;if(!c()(this.suggests))return null==t&&(t=this.selected),!!(e=this.suggests[t])&&(s=e[this.pr.value],i=f()(e[this.pr.label]),"enter"===this.changesMode?(this.$refs.query.value=i,this.query=i,this.$refs.query.focus(),this.onFocus(),this.queryDebounced(),this.$emit("enter",i)):("passive"!==this.changesMode&&(this.$refs.query.value="",this.query=""),this.$refs.query.blur(),this.onBlur("passive"===this.changesMode),null!=i&&this.$emit("input",i),null!=s?this.$emit("change",s,i):void 0))},onBeforeInput:function(e){var i;if(i=e.which||e.keyCode,!e.metaKey&&!e.ctrlKey)return this.value&&e.preventDefault(),8===i&&this.value?(this.$emit("change",null),t(()=>(this.$refs.query.focus(),this.onFocus()))):void 0},onInput:function(){return this.query=this.$refs.query.value,this.$emit("input",this.query||null),this.onFocus(),this.queryDebounced()},onFocus:function(){return t(()=>(this.focus=!0,this.selectValue()))},onBlur:function(e){if(!this.openSuggests||e)return t(()=>this.focus=!1)},onKeybind:function(t){var e;switch(e=!1,t.which||t.keyCode){case 13:e=!0,this.change();break;case 40:e=!0,this.selectDown();break;case 38:e=!0,this.selectUp()}if(e)return t.preventDefault()}}}}).call(this,i(34).setImmediate)},550:function(t,e,i){"use strict";(function(t){var s=i(153),n=i(58),o=i(83),r=i.n(o),a=i(37),l=i.n(a),c=i(3),u=i.n(c),d=i(559),h=i.n(d);e.a={components:{Input:s.a,Button:n.a},props:{name:{default:"login"},type:{default:"login"},resume:{default:null},simple:{type:Boolean,default:!1},headerLinks:{type:Boolean,default:!1}},data:function(){return{fields:{email:null,uri:null,password:null}}},computed:{isLoggedIn:function(){return this.$store.getters["account/isLoggedIn"]},iframes:function(){return this.$store.getters["auth/iframes"]},inProcess:function(){var t;return null!=(t=this.$store.state.auth)?t.inProcess:void 0},logining:function(){var t;return null!=(t=this.inProcess)?t.type:void 0},links:function(){return this.$store.state.config.app.links},types:function(){return this.simple?["simple"]:["login","register"]},supporting:function(){var t;return t=this.$store.getters["auth/supporting"],{email:r()(t,"email"),social:l()(t,"email")}},buttonText:function(){return this.simple?this.$t("login.simple.action"):this.resume||"register"===this.type?this.$t("login.register.action"):this.$t("login.login.action")},regex:function(){return{uri:h.a.URI,email:h.a.EMAIL,password:h.a.PASSWORD}},email:function(){var t;return t=(this.fields.email||"").trim(),this.regex.email.test(t)||"login"===this.type&&this.regex.uri.test(t)?t:null},uri:function(){var t;return t=(this.fields.uri||"").trim(),this.regex.uri.test(t)?t:null},password:function(){var t;return t=this.fields.password||"",this.regex.password.test(t)?t:null},userPicture:function(){var t,e;return null==(null!=(t=this.resume)?t.user:void 0)?null:(e=this.resume.user).facebook_picture||e.google_picture||e.telegram_picture||e.twitch_picture||null},serviceLink:function(){return this.$store.state.config.app.url.site.replace(/^https?:\/\//i,"")+"/@"},isResume:function(){return!!this.resume},isValid:function(){return this.resume?null!=this.uri:"register"===this.type?null!=this.email&&null!=this.uri&&null!=this.password:null!=this.email&&null!=this.password}},watch:{isLoggedIn:function(){if(this.isLoggedIn)return this.loginSuccess()},inProcess:function(){if(this.inProcess)return this._process()},isResume:function(){return this.isResume&&t(()=>{var t;return null!=(t=this.$refs.uri)?t.focus():void 0}),this.$emit("resume",this.isResume)},"fields.email":function(){return this.$emit("email",this.fields.email)}},methods:{_process:function(){var t;if((null==this.show||this.show)&&this.inProcess)return this.inProcess.simple!==this.simple&&(this.inProcess.simple=this.simple,this.$store.commit("auth/process",this.inProcess)),t=this.inProcess.type,this.inProcess.promise.then(()=>(this.trackEvent([this.name,"login",t]),this.trackEvent([this.$ttrouter.pageName(),(this.simple?"simple_":"")+"login",t]))).catch(e=>this._processFail(t,e))},_processFail:function(t,e){var i,s,n;return i=(null!=e?e.error:void 0)||(null!=e&&null!=(n=e.data)?n.error:void 0)||null,this.simple||"need_register"!==i?(s="settings.errors.other","already_exists"===i?s="login.errors.uri":"ratelimit"===i?s="login.errors.ratelimit":"email"===t&&"register"!==this.type&&(s="login.errors.email"),this.$store.dispatch("alerts/add",{type:"error",locale:s})):this.$emit("resume",{user:e.data,params:e.params})},social:function(t){if(t)return this.$store.dispatch("account/"+t,{simple:this.simple}).catch((function(){}))},login:function(t){return t.preventDefault(),null!=this.resume?this.resumeLogin():this.loginEmail()},cancel:function(){return this.$emit("resume",null),this.trackClick("cancel_registration")},resumeLogin:function(){var t,e;if(this.resume&&this.isValid)return e=this.uri,t=u()({},this.resume.params,{uri:e}),this.$store.dispatch("auth/link",t).catch((function(){}))},loginEmail:function(){var t,e,i,s;if(this.isValid)return t=this.email,e=this.password,s="register"===this.type||this.resume?this.uri:null,i=this.simple,this.$store.dispatch("auth/email",{email:t,password:e,uri:s,simple:i}).catch((function(){}))},loginSuccess:function(){if(this.isLoggedIn)return this.$emit("login")},onClickRestore:function(){return this.trackClick("restore_password"),this.$emit("close")},trackClick:function(t){return this.trackEvent([this.$ttrouter.pageName(),"click_"+t])}}}}).call(this,i(34).setImmediate)},551:function(t,e,i){"use strict";var s={components:{Preloader:i(18).a},model:{prop:"checked"},props:{checked:{type:Boolean,required:!0},name:{type:String,default:null},label:{type:String,default:null},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},methods:{onChange:function(){return this.$emit("input",this.$refs.input.checked,this.name)}}},n=(i(589),i(0)),o=Object(n.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{staticClass:"checkbox",class:{m_disabled:t.disabled,m_loading:t.loading}},[i("div",{staticClass:"checkbox__field"},[i("input",t._b({ref:"input",staticClass:"checkbox__field_input",attrs:{type:"checkbox",name:t.name,disabled:t.disabled||t.loading},domProps:{checked:t.checked},on:{change:t.onChange}},"input",t.$attrs,!1)),t._t("default",(function(){return[i("div",{staticClass:"checkbox__field_box"})]})),i("transition",{attrs:{"enter-class":"m_hidden","leave-to-class":"m_hidden"}},[t.loading?i("Preloader",{attrs:{central:!0}}):t._e()],1)],2),t.label?i("div",{staticClass:"checkbox__label",domProps:{innerHTML:t._s(t.label)}}):t._e()])}),[],!1,null,"42ae595e",null);e.a=o.exports},554:function(t,e,i){},558:function(t,e,i){},559:function(t,e){var i,s,n,o;n=/^[a-z0-9]{1}[a-z0-9.\-_\+]{1,30}[a-z0-9]{1}$/i,i=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,s=/.{5,}/,o=/^(https?:)?(\/\/)?[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]$/i,t.exports={URI:n,EMAIL:i,PASSWORD:s,WEBSITE:o}},560:function(t,e,i){},581:function(t,e,i){"use strict";var s=i(549).a,n=(i(597),i(0)),o=Object(n.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"suggestedInput",class:{m_focus:t.focus}},[i("div",{staticClass:"suggestedInput__input",on:{click:t.setFocus}},[t.icon||t.$slots.icon?i("div",{staticClass:"suggestedInput__icon"},[t._t("icon",(function(){return[i("Icon",{attrs:{name:t.icon}})]}))],2):t._e(),t.val?i("div",{staticClass:"suggestedInput__input_value"},[t._v(t._s(t.val))]):t._e(),i("input",{ref:"query",staticClass:"suggestedInput__input_query",style:{width:t.queryWidth},attrs:{maxlength:"50"},domProps:{value:t.query},on:{focus:t.onFocus,blur:function(e){return t.onBlur()},input:t.onInput,keydown:t.onBeforeInput,keyup:t.onKeybind}}),t.value||t.query||!t.placeholder?t._e():i("div",{staticClass:"suggestedInput__input_placeholder",domProps:{textContent:t._s(t.placeholder)}})]),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.isLoading?i("div",{staticClass:"suggestedInput__loading"},[i("Icon",{attrs:{name:"preloader_small"}})],1):t._e()]),i("Dropdown",{attrs:{show:t.openSuggests,anchor:t.$el,width:"anchor",mode:"blog"===t.type?"user":null},on:{close:function(e){return t.onBlur(!0)}}},t._l(t.suggests,(function(e,s){return i("div",{key:e[t.pr.value],staticClass:"dropdown__item",class:{m_focus:s===t.selected},on:{mouseover:function(e){t.selected=s},click:function(e){return e.stopPropagation(),e.preventDefault(),t.change(s)}}},["blog"===t.type?i("div",{staticClass:"dropdown__item_userpic"},[i("Userpic",{attrs:{blog:e}})],1):t._e(),"blog"===t.type?i("div",{staticClass:"dropdown__item_blog"},[i("div",{staticClass:"dropdown__item_name"},[i("span",[t._v(t._s(t._f("blogName")(e)))]),e.verified?i("span",{staticClass:"dropdown__item_name_verified"}):t._e()]),e.name?i("div",{staticClass:"dropdown__item_username"},[t._v(t._s("@"+e.uri))]):t._e()]):t._e(),"blog"!==t.type?i("div",{staticClass:"dropdown__item_text"},[t._v(t._s(t._f("unescape")(e[t.pr.label])))]):t._e()])})),0)],1)}),[],!1,null,"a05a7de0",null);e.a=o.exports},589:function(t,e,i){"use strict";i(554)},593:function(t,e,i){var s=i(158),n=i(70),o=i(31),r=i(21),a=i(594);t.exports=function(t){if(null==t)return 0;if(o(t))return r(t)?a(t):t.length;var e=n(t);return"[object Map]"==e||"[object Set]"==e?t.size:s(t).length}},594:function(t,e,i){var s=i(595),n=i(161),o=i(596);t.exports=function(t){return n(t)?o(t):s(t)}},595:function(t,e,i){var s=i(361)("length");t.exports=s},596:function(t,e){var i="[\\ud800-\\udfff]",s="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",r="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+s+"|"+n+")"+"?",c="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+[o,r,a].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),u="(?:"+[o+s+"?",s,r,a,i].join("|")+")",d=RegExp(n+"(?="+n+")|"+u+c,"g");t.exports=function(t){for(var e=d.lastIndex=0;d.test(t);)++e;return e}},597:function(t,e,i){"use strict";i(558)},598:function(t,e,i){var s=i(599),n=i(600),o=i(25),r=i(5),a=i(71);t.exports=function(t,e,i){var l=r(t)?s:n;return i&&a(t,e,i)&&(e=void 0),l(t,o(e,3))}},599:function(t,e){t.exports=function(t,e){for(var i=-1,s=null==t?0:t.length;++i<s;)if(!e(t[i],i,t))return!1;return!0}},600:function(t,e,i){var s=i(60);t.exports=function(t,e){var i=!0;return s(t,(function(t,s,n){return i=!!e(t,s,n)})),i}},601:function(t,e,i){"use strict";i(560)},610:function(t,e,i){"use strict";(function(t){var s=i(925),n=i(926),o=i(919),r=i(920),a=i(927),l=i(928),c=i(921),u=i(918),d=i(922),h=i(32),p=i.n(h);e.a={components:{SettingsNav:s.a,SettingsAside:n.a,"settings-main":o.a,"settings-teammates":r.a,"settings-domain":a.a,"settings-topics":l.a,"settings-menu":c.a,"settings-imports":u.a,"settings-account":d.a},data:function(){return{sections:["main","teammates","domain","topics","menu","imports","account"],nav:!0,loading:!1}},computed:{profile:function(){return this.$store.getters["account/profile"]},blog:function(){return this.$store.getters["blogs/settings/byId"][this.blogId]},params:function(){return this.$store.getters["blogs/settings/params"]},open:function(){return this.params.open},blogId:function(){return this.params.blog_id||this.profile.id},section:function(){return this.params.section||"main"||p()(this.sections)}},watch:{blogId:{immediate:!0,handler:function(){return this.blogId&&this.open?this.fetch():this.close()}},open:function(){if(this.open&&this.fetch(),this.open&&this.params.section)return this.nav=!1},profile:function(){if(!this.profile.id)return this.close()}},methods:{fetch:function(){if(this.blogId)return this.loading=!0,this.$store.dispatch("blogs/settings/byId",{id:this.blogId}).then(()=>this.loading=!1,()=>this.loading=!1)},close:function(){return this.$store.dispatch("blogs/settings/closeSettings"),this.nav=!0},closeNav:function(){return t(()=>this.nav=!1)},changeBlog:function(t){return this.$store.commit("blogs/settings/setSettings",{blog_id:t})},changeSection:function(t){return this.$store.commit("blogs/settings/setSettings",{section:t}),this.closeNav()},logout:function(){return this.$store.dispatch("account/logout")}}}}).call(this,i(34).setImmediate)},611:function(t,e,i){"use strict";(function(t){var s=i(58),n=i(153),o=i(115),r=i.n(o),a=i(85),l=i.n(a);e.a={components:{Button:s.a,Input:n.a},props:["topic","editing","blog"],data:function(){return{saveing:!1,deleteing:!1,uri:null,description:null,uriChecker:null}},computed:{config:function(){return this.$store.state.config.app},invalidFields:function(){var t,e,i;return i=/^[a-z0-9]{1}[a-z0-9.\-_\+]{1,98}[a-z0-9]{1}$/i,e=/^topic\d+/,t=[],this.description&&this.description.length>500&&t.push("description"),this.uri&&i.test(this.uri)?e.test(this.uri)&&t.push("uri"):t.push("uri"),t},changed:function(){return{uri:(this.uri||"").toLowerCase()!==this.topic.uri,description:this.description!==this.topic.description}},valid:function(){return 0===this.invalidFields.length&&(!this.changed.uri||!0===this.uriChecker)},uriStatus:function(){return this.changed.uri?!0===this.uriChecker?"success":this.invalidFields.indexOf("uri")>-1||!1===this.uriChecker?"error":"loading"===this.uriChecker?"preloader":null:"success"},blogUrl:function(){return this.blog.domain?this.blog.domain:`${this.config.url.site.replace(/^\w+:\/\//,"")}/@${this.blog.uri}`},checkUriDebounced:function(){return r()(()=>this.checkUri(),500,{trailing:!0})}},filters:{unescape:function(t){return l()(t)}},watch:{topic:{immediate:!0,deep:!0,handler:function(){return this.uri=this.topic.uri,this.description=this.topic.description}},uri:function(){return this.checkUriDebounced()}},methods:{checkUri:function(){var t,e;return this.changed.uri?!(this.invalidFields.indexOf("uri")>-1)&&(this.uriChecker="loading",t=this.blog.id,e=this.uri,this.$store.dispatch("blogs/settings/checkTopicUri",{blog_id:t,uri:e}).then(t=>this.uriChecker=t).catch((function(){return this.uriChecker=null}))):this.uriChecker=!0},toggleEditing:function(e){return t(()=>this.$emit("editing",e))},editTopic:function(){var t,e,i;if(!this.saveing&&this.valid)return this.saveing=!0,t=this.blog.id,i=this.topic.id,e={uri:this.uri,description:this.description},this.$store.dispatch("blogs/settings/editTopic",{blog_id:t,id:i,data:e}).then(()=>(this.saveing=!1,this.$emit("editing",!1)),()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),this.saveing=!1))},removeTopic:function(t){var e,i;if(!this.deleteing)return this.deleteing=!0,e=this.blog.id,t=this.topic.id,i=this.topic.name,this.$store.dispatch("confirms/add",{message:this.$t("confirms.remove_topic",{topic:i}),type:"delete"}).then(()=>this.$store.dispatch("blogs/settings/removeTopic",{blog_id:e,id:t}),(function(){})).then(()=>this.deleteing=!1,()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),this.deleteing=!1))}}}}).call(this,i(34).setImmediate)},612:function(t,e,i){"use strict";(function(t){var s=i(58),n=i(153),o=(i(115),i(85)),r=i.n(o);e.a={components:{Button:s.a,Input:n.a},props:["value","id","editing","sorting","loading","validator"],data:function(){return{name:null,url:null}},computed:{config:function(){return this.$store.state.config.app},invalidFields:function(){var t;return t=[],this.validator("name",this.name)||t.push("name"),this.validator("url",this.url)||t.push("url"),t},changed:function(){return{name:this.name!==this.value.name,url:this.url!==this.value.url}},valid:function(){return 0===this.invalidFields.length}},filters:{unescape:function(t){return r()(t)}},watch:{value:{immediate:!0,deep:!0,handler:function(){return this.name=this.value.name,this.url=this.value.url}}},methods:{toggleEditing:function(e){return t(()=>this.$emit("editing",e))},editMenu:function(){var t,e;if(!this.loading&&this.valid)return t=this.name,e=this.url,this.$emit("edit",{name:t,url:e})},removeMenu:function(t){var e;if(!this.loading)return e=this.value.name,this.$store.dispatch("confirms/add",{message:this.$t("confirms.remove_menu",{menu:e}),type:"delete"}).then(()=>this.$emit("remove"),(function(){}))}}}}).call(this,i(34).setImmediate)},613:function(t,e,i){"use strict";(function(t){var s=i(86),n=i(27),o=i(58),r=i(153),a=i(2),l=i.n(a),c=i(10),u=i.n(c);e.a={components:{Modal:s.a,IconButton:n.a,Button:o.a,Input:r.a},props:["show"],data:function(){return{submiting:!1,fields:{old_password:null,password:null,confirm_password:null}}},computed:{isValid:function(){var t,e,i;return({old_password:e,password:i,confirm_password:t}=this.fields),!(!e||!e.length>=5)&&(!(!i||!i.length>=5)&&i===t)},hasChanges:function(){return!!(this.fields.old_password||this.fields.password||this.fields.confirm_password)}},watch:{show:function(){if(this.show)return t(()=>this.$refs.old_password.focus())}},methods:{submit:function(t){var e,i;if(t.preventDefault(),this.isValid&&!this.submiting)return({old_password:e,password:i}=this.fields),this.submiting=!0,Promise.resolve().then(()=>this.$store.dispatch("auth/ids")).then(()=>this.$store.dispatch("api/put",{method:"account/password",data:this.fields})).then(()=>(this.submiting=!1,this.close())).catch(t=>{var e;return this.submiting=!1,"bad_request"===(null!=t&&null!=(e=t.data)?e.error:void 0)?this.$store.dispatch("alerts/add",{type:"error",show:"topic",topic:"password_error",locale:"settings.password.error"}):this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"})})},close:function(){return this.$emit("close")},reset:function(){return l()(u()(this.fields),t=>(this.fields[t]=null,!0))}}}}).call(this,i(34).setImmediate)},614:function(t,e,i){"use strict";(function(t){var s=i(86),n=i(27),o=i(58),r=i(153),a=(i(10),i(559)),l=i.n(a);e.a={components:{Modal:s.a,IconButton:n.a,Button:o.a,Input:r.a},data:function(){return{loading:!1,error:null,uri:!1}},computed:{account:function(){return this.$store.state.account},serviceLink:function(){return this.$store.state.config.app.url.site.replace(/^https?:\/\//i,"")+"/@"},show:function(){var t;return this.$store.state.blogs.settings.new_blog.open&&(null!=(t=this.account)?t.can_create_blog:void 0)},isValid:function(){return l.a.URI.test(this.uri||"")}},watch:{uri:function(){return this.error=null},show:function(){if(this.show)return t(()=>this.$refs.uri.focus())}},methods:{submit:function(t){var e,i;if(t.preventDefault(),this.isValid&&!this.loading)return this.loading=!0,i=this.uri,e=()=>this.$store.dispatch("api/post",{method:"blogs",data:{uri:i}}).then(()=>this.$store.dispatch("account/fetch")).then((function(){return!0})),this.$store.dispatch("api/get",{method:"account/uri/"+i}).then(({free:t})=>t?e():(this.error=this.$t("popups.new_blog.error"),!1)).then(t=>{if(this.loading=!1,t)return this.close()}).catch(t=>(this.loading=!1,this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"})))},close:function(){return this.$store.dispatch("blogs/settings/closeNewBlog")}}}}).call(this,i(34).setImmediate)},617:function(t,e,i){"use strict";var s=i(550).a,n=(i(601),i(0)),o=Object(n.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[t.isResume?i("div",{staticClass:"login__header"},[t.userPicture?i("div",{staticClass:"login__header_userpic",style:{"background-image":"url("+t.userPicture+")"}}):t._e(),i("div",{staticClass:"login__header_title"},[t._v(t._s(t.$t("login.resume.title")))])]):t.simple?i("div",{staticClass:"login__header"},t._l(t.types,(function(e){return i("div",{key:e,staticClass:"login__header_title",domProps:{innerHTML:t._s(t.$t("login."+e+".title"))}})})),0):i("div",{staticClass:"login__header"},t._l(t.types,(function(e){return i(t.headerLinks&&e!==t.type?"Link":"div",{key:e,tag:"component",staticClass:"login__header_title",class:{m_link:e!==t.type},attrs:{to:t.headerLinks?{name:e,domain:null,query:t.$route.query}:null},domProps:{innerHTML:t._s(t.$t("login."+e+".title"))},on:{click:function(i){return t.$emit("click",e)}}})})),1),t.supporting.email?i("form",{staticClass:"login__form",on:{submit:t.login}},[t.isResume?t._e():i("div",{staticClass:"login__form_field"},[i("Input",{attrs:{name:"email",type:"email",label:t.$t("login.email"),autocomplete:"email"},model:{value:t.fields.email,callback:function(e){t.$set(t.fields,"email",e)},expression:"fields.email"}})],1),t.isResume?t._e():i("div",{staticClass:"login__form_field"},[i("Input",{attrs:{name:"password",type:"password",label:t.$t("login.password"),autocomplete:"current-password"},model:{value:t.fields.password,callback:function(e){t.$set(t.fields,"password",e)},expression:"fields.password"}})],1),"register"===t.type||t.isResume?i("div",{staticClass:"login__form_field"},[i("Input",{ref:"uri",attrs:{name:"uri",label:t.$t("login.uri"),prefix:t.serviceLink,max:30},model:{value:t.fields.uri,callback:function(e){t.$set(t.fields,"uri",e)},expression:"fields.uri"}})],1):t._e(),i("div",{staticClass:"login__form_field m_buttons"},[t.isResume?i("Button",{attrs:{type:"filled",rounded:"",label:t.buttonText,loading:!!t.inProcess,disabled:!t.isValid},on:{click:t.login}}):i("Button",{attrs:{type:"filled",rounded:"",label:t.buttonText,loading:"email"===t.logining,disabled:!t.isValid},on:{click:t.login}})],1)]):t._e(),t.isResume?t._e():i("div",{staticClass:"login__buttons"},t._l(t.supporting.social,(function(e){return i("div",{key:e,staticClass:"login__button",class:["m_"+e,t.logining===e?"m_loading":null],on:{click:function(i){return t.social(e)}}},[i("div",{staticClass:"login__button_icon"},[i("Icon",{attrs:{name:"logo_"+e}})],1),i("div",{staticClass:"login__button_loading"},[i("Icon",{attrs:{name:"preloader"}})],1),t.iframes[e]?i("iframe",{staticClass:"login__button_frame",attrs:{src:t.iframes[e]}}):t._e()])})),0),i("div",{staticClass:"login__footer"},[t.isResume?i("div",{staticClass:"login__footer_link",on:{click:t.cancel}},[t._v(t._s(t.$t("login.cancel")))]):t._e(),t.isResume?t._e():i("Link",{staticClass:"login__footer_link",attrs:{to:{name:"restore_password",domain:null,query:{email:t.email}}},on:{click:t.onClickRestore}},[t._v(t._s(t.$t("login.restore_password")))]),i("div",{staticClass:"login__footer_text"},[t._v(t._s(t.$t("login.tos.prefix[0]"))+t._s(t.buttonText)+t._s(t.$t("login.tos.prefix[1]"))),i("a",{attrs:{href:t.links.tos,target:"_blank"},on:{click:function(e){return t.trackClick("terms")}}},[t._v(t._s(t.$t("login.tos.link")))]),i("span",[t._v(t._s(t.$t("login.tos.suffix")))])])],1)])}),[],!1,null,"5c8a3ed6",null);e.a=o.exports},671:function(t,e,i){},672:function(t,e,i){},673:function(t,e,i){},674:function(t,e,i){},675:function(t,e,i){},676:function(t,e,i){},677:function(t,e,i){},678:function(t,e,i){},679:function(t,e,i){},680:function(t,e,i){},681:function(t,e,i){},682:function(t,e,i){},683:function(t,e,i){},684:function(t,e,i){},685:function(t,e,i){},686:function(t,e,i){},687:function(t,e,i){},688:function(t,e,i){},689:function(t,e,i){},690:function(t,e,i){},691:function(t,e,i){},701:function(t,e,i){"use strict";var s=i(611).a,n=(i(895),i(0)),o=Object(n.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(t.editing?"form":"div",{tag:"component",staticClass:"settingsTopic",on:{submit:function(e){return e.preventDefault(),t.editTopic.apply(null,arguments)}}},[t.editing?i("div",{staticClass:"settingsTopic__content"},[i("div",{staticClass:"settingsTopic__name"},[t._v(t._s(t._f("unescape")(t.topic.name)))]),i("div",{staticClass:"settingsTopic__field"},[i("Input",{attrs:{mode:"content",max:500,label:t.$t("settings.topics.description")},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),i("div",{staticClass:"settingsTopic__field"},[i("Input",{attrs:{prefix:t.blogUrl+"/+",max:100,label:t.$t("settings.topics.uri"),status:t.uriStatus},model:{value:t.uri,callback:function(e){t.uri=e},expression:"uri"}})],1)]):i("div",{staticClass:"settingsTopic__content"},[i("div",{staticClass:"settingsTopic__name"},[t._v(t._s(t._f("unescape")(t.topic.name)))]),i("div",{staticClass:"settingsTopic__description"},[t._v(t._s(t.topic.description))]),i("div",{staticClass:"settingsTopic__link"},[t._v(t._s(t.blogUrl)+"/+"+t._s(t.topic.uri||"topic"+t.topic.id))])]),t.editing?i("div",{staticClass:"settingsTopic__actions"},[i("div",{staticClass:"settingsTopic__actions_item"},[i("Button",{attrs:{type:"text",display:"inline",color:"secondary",icon:"enter",action:"submit",loading:t.saveing,disabled:!t.valid},on:{click:t.editTopic}})],1),i("div",{staticClass:"settingsTopic__actions_item"},[i("Button",{attrs:{type:"text",display:"inline",color:"secondary",icon:"close",disabled:t.saveing},on:{click:function(e){return e.stopPropagation(),t.toggleEditing(!1)}}})],1)]):i("div",{staticClass:"settingsTopic__actions"},[i("div",{staticClass:"settingsTopic__actions_item"},[i("Button",{attrs:{type:"text",display:"inline",color:"secondary",icon:"article_edit"},on:{click:function(e){return e.stopPropagation(),t.toggleEditing(!0)}}})],1),i("div",{staticClass:"settingsTopic__actions_item"},[i("Button",{attrs:{type:"text",display:"inline",color:"secondary",icon:"trash",loading:t.deleteing},on:{click:function(e){return t.removeTopic(t.topic.id)}}})],1)])])}),[],!1,null,"6e092991",null);e.a=o.exports},883:function(t,e,i){"use strict";i(671)},884:function(t,e,i){"use strict";i(672)},885:function(t,e){t.exports={functional:!0,render(t,e){const{_c:i,_v:s,data:n,children:o=[]}=e,{class:r,staticClass:a,style:l,staticStyle:c,attrs:u={},...d}=n;return i("svg",{class:[r,a],style:[l,c],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24"},u),...d},o.concat([i("path",{attrs:{"fill-rule":"evenodd",d:"M15.79 12.312a1.75 1.75 0 012.46-.273l4.218 3.375a.75.75 0 11-.936 1.172l-4.22-3.375a.25.25 0 00-.351.038m0 0l-3.336 4.17a1.75 1.75 0 01-2.46.274l-1.868-1.495a.25.25 0 00-.349.035L4.576 21.48a.75.75 0 11-1.152-.96l4.372-5.247a1.75 1.75 0 012.437-.247l1.868 1.495a.251.251 0 00.352-.039l3.337-4.17","clip-rule":"evenodd"}}),i("path",{attrs:{"fill-rule":"evenodd",d:"M4.003 3.75c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h15.994c.69 0 1.25-.56 1.25-1.25V5c0-.69-.56-1.25-1.25-1.25H4.003zM1.253 5a2.75 2.75 0 012.75-2.75h15.994A2.75 2.75 0 0122.747 5v14a2.75 2.75 0 01-2.75 2.75H4.003A2.75 2.75 0 011.253 19V5z","clip-rule":"evenodd"}}),i("path",{attrs:{"fill-rule":"evenodd",d:"M8.884 8.116a1.25 1.25 0 10-1.768 1.768 1.25 1.25 0 001.768-1.768zm1.06-1.061a2.75 2.75 0 10-3.89 3.889 2.75 2.75 0 003.89-3.889z","clip-rule":"evenodd"}})]))}}},886:function(t,e){t.exports={functional:!0,render(t,e){const{_c:i,_v:s,data:n,children:o=[]}=e,{class:r,staticClass:a,style:l,staticStyle:c,attrs:u={},...d}=n;return i("svg",{class:[r,a],style:[l,c],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24"},u),...d},o.concat([i("path",{attrs:{"fill-rule":"evenodd",d:"M4.003 3.75c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h15.994c.69 0 1.25-.56 1.25-1.25V5c0-.69-.56-1.25-1.25-1.25H4.003zM1.253 5a2.75 2.75 0 012.75-2.75h15.994A2.75 2.75 0 0122.747 5v14a2.75 2.75 0 01-2.75 2.75H4.003A2.75 2.75 0 011.253 19V5z","clip-rule":"evenodd"}}),i("path",{attrs:{"fill-rule":"evenodd",d:"M9.559 9.703v4.592a.75.75 0 01.063-.033L14.433 12 9.622 9.737a.752.752 0 01-.063-.034zm.728-1.311A1.5 1.5 0 008.06 9.704v4.59a1.5 1.5 0 002.228 1.313l4.855-2.284a1.5 1.5 0 000-2.648l-4.855-2.283z","clip-rule":"evenodd"}})]))}}},887:function(t,e,i){"use strict";i(673)},888:function(t,e,i){"use strict";i(674)},889:function(t,e,i){"use strict";i(675)},890:function(t,e,i){"use strict";i(676)},891:function(t,e,i){"use strict";i(677)},892:function(t,e,i){var s=i(35),n=i(26);t.exports=function(t){return!0===t||!1===t||n(t)&&"[object Boolean]"==s(t)}},893:function(t,e,i){"use strict";i(678)},894:function(t,e,i){(function(t,s){var n;!function(o){e&&e.nodeType,t&&t.nodeType;var r="object"==typeof s&&s;r.global!==r&&r.window!==r&&r.self;var a,l=2147483647,c=/^xn--/,u=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,_=String.fromCharCode;function m(t){throw new RangeError(h[t])}function g(t,e){for(var i=t.length,s=[];i--;)s[i]=e(t[i]);return s}function f(t,e){var i=t.split("@"),s="";return i.length>1&&(s=i[0]+"@",t=i[1]),s+g((t=t.replace(d,".")).split("."),e).join(".")}function v(t){for(var e,i,s=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(i=t.charCodeAt(n++)))?s.push(((1023&e)<<10)+(1023&i)+65536):(s.push(e),n--):s.push(e);return s}function b(t){return g(t,(function(t){var e="";return t>65535&&(e+=_((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=_(t)})).join("")}function C(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function k(t,e,i){var s=0;for(t=i?p(t/700):t>>1,t+=p(t/e);t>455;s+=36)t=p(t/35);return p(s+36*t/(t+38))}function w(t){var e,i,s,n,o,r,a,c,u,d,h,_=[],g=t.length,f=0,v=128,C=72;for((i=t.lastIndexOf("-"))<0&&(i=0),s=0;s<i;++s)t.charCodeAt(s)>=128&&m("not-basic"),_.push(t.charCodeAt(s));for(n=i>0?i+1:0;n<g;){for(o=f,r=1,a=36;n>=g&&m("invalid-input"),((c=(h=t.charCodeAt(n++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||c>p((l-f)/r))&&m("overflow"),f+=c*r,!(c<(u=a<=C?1:a>=C+26?26:a-C));a+=36)r>p(l/(d=36-u))&&m("overflow"),r*=d;C=k(f-o,e=_.length+1,0==o),p(f/e)>l-v&&m("overflow"),v+=p(f/e),f%=e,_.splice(f++,0,v)}return b(_)}function $(t){var e,i,s,n,o,r,a,c,u,d,h,g,f,b,w,$=[];for(g=(t=v(t)).length,e=128,i=0,o=72,r=0;r<g;++r)(h=t[r])<128&&$.push(_(h));for(s=n=$.length,n&&$.push("-");s<g;){for(a=l,r=0;r<g;++r)(h=t[r])>=e&&h<a&&(a=h);for(a-e>p((l-i)/(f=s+1))&&m("overflow"),i+=(a-e)*f,e=a,r=0;r<g;++r)if((h=t[r])<e&&++i>l&&m("overflow"),h==e){for(c=i,u=36;!(c<(d=u<=o?1:u>=o+26?26:u-o));u+=36)w=c-d,b=36-d,$.push(_(C(d+w%b,0))),c=p(w/b);$.push(_(C(c,0))),o=k(i,f,s==n),i=0,++s}++i,++e}return $.join("")}a={version:"1.4.1",ucs2:{decode:v,encode:b},decode:w,encode:$,toASCII:function(t){return f(t,(function(t){return u.test(t)?"xn--"+$(t):t}))},toUnicode:function(t){return f(t,(function(t){return c.test(t)?w(t.slice(4).toLowerCase()):t}))}},void 0===(n=function(){return a}.call(e,i,e,t))||(t.exports=n)}()}).call(this,i(88)(t),i(44))},895:function(t,e,i){"use strict";i(679)},896:function(t,e,i){"use strict";i(680)},897:function(t,e,i){"use strict";i(681)},898:function(t,e,i){"use strict";i(682)},899:function(t,e,i){"use strict";i(683)},900:function(t,e,i){"use strict";i(684)},901:function(t,e){t.exports={functional:!0,render(t,e){const{_c:i,_v:s,data:n,children:o=[]}=e,{class:r,staticClass:a,style:l,staticStyle:c,attrs:u={},...d}=n;return i("svg",{class:[r,a],style:[l,c],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",viewBox:"0 0 32 32"},u),...d},o.concat([i("path",{attrs:{"fill-rule":"evenodd",d:"M15.37 12.75a.75.75 0 00-.713.519l-1.267 3.908a.745.745 0 00-.06.187l-.293.905a.75.75 0 001.427.462l.156-.481h2.76l.157.481a.75.75 0 001.427-.462l-1.62-5a.75.75 0 00-.714-.519h-1.26zm1.525 4l-.81-2.5h-.17l-.81 2.5h1.79z","clip-rule":"evenodd"}}),i("path",{attrs:{"fill-rule":"evenodd",d:"M9.46 9.46a9.25 9.25 0 0113.08 0 9.25 9.25 0 010 13.08 9.25 9.25 0 01-13.08 0 9.25 9.25 0 010-13.08zM23.6 8.398C19.403 4.2 12.597 4.2 8.4 8.399 4.2 12.597 4.2 19.403 8.399 23.6c4.198 4.199 11.004 4.199 15.202 0 4.199-4.198 4.199-11.004 0-15.202z","clip-rule":"evenodd"}})]))}}},902:function(t,e){t.exports={functional:!0,render(t,e){const{_c:i,_v:s,data:n,children:o=[]}=e,{class:r,staticClass:a,style:l,staticStyle:c,attrs:u={},...d}=n;return i("svg",{class:[r,a],style:[l,c],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",viewBox:"0 0 32 32"},u),...d},o.concat([i("path",{attrs:{"fill-rule":"evenodd",d:"M13.824 7.847a8.515 8.515 0 00-3.523 2.118l-.007.007a8.42 8.42 0 00-.164 11.897 8.415 8.415 0 0011.893-.163l.007-.006a8.526 8.526 0 002.118-3.524 7.98 7.98 0 01-8.675-1.638l-.014-.014a7.986 7.986 0 01-1.635-8.677zm.009-1.56a1.323 1.323 0 011.5 1.861 6.487 6.487 0 001.194 7.323 6.48 6.48 0 007.34 1.186 1.312 1.312 0 011.847 1.487l-.002.01a10.025 10.025 0 01-2.617 4.602 9.915 9.915 0 01-14.019.18l-.014-.013c-3.82-3.924-3.738-10.2.182-14.022A10.015 10.015 0 0113.82 6.29l.011-.003z","clip-rule":"evenodd"}})]))}}},903:function(t,e){t.exports={functional:!0,render(t,e){const{_c:i,_v:s,data:n,children:o=[]}=e,{class:r,staticClass:a,style:l,staticStyle:c,attrs:u={},...d}=n;return i("svg",{class:[r,a],style:[l,c],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",viewBox:"0 0 32 32"},u),...d},o.concat([i("path",{attrs:{"fill-rule":"evenodd",d:"M16 22.393a.75.75 0 01.75.75V26a.75.75 0 01-1.5 0v-2.857a.75.75 0 01.75-.75zM16 5.25a.75.75 0 01.75.75v2.857a.75.75 0 01-1.5 0V6a.75.75 0 01.75-.75zM11.821 16a4.179 4.179 0 118.357 0 4.179 4.179 0 01-8.357 0zM16 13.322a2.679 2.679 0 100 5.357 2.679 2.679 0 000-5.357zm-4.521 7.199a.75.75 0 010 1.06l-2.023 2.024a.75.75 0 11-1.06-1.061l2.022-2.023a.75.75 0 011.061 0zM23.605 8.395a.75.75 0 010 1.061l-2.023 2.023a.75.75 0 01-1.061-1.06l2.023-2.024a.75.75 0 011.06 0zM5.25 16a.75.75 0 01.75-.75h2.857a.75.75 0 010 1.5H6a.75.75 0 01-.75-.75zm17.143 0a.75.75 0 01.75-.75H26a.75.75 0 010 1.5h-2.857a.75.75 0 01-.75-.75zM8.395 8.395a.75.75 0 011.061 0l2.023 2.023a.75.75 0 01-1.06 1.061L8.394 9.456a.75.75 0 010-1.06zM20.52 20.521a.75.75 0 011.062 0l2.023 2.023a.75.75 0 01-1.061 1.06l-2.023-2.022a.75.75 0 010-1.06z","clip-rule":"evenodd"}})]))}}},904:function(t,e,i){var s=i(363),n=i(905),o=i(62),r=Object.prototype.toString,a=n((function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=r.call(e)),t[e]=i}),s(o));t.exports=a},905:function(t,e,i){var s=i(906);t.exports=function(t,e){return function(i,n){return s(i,t,e(n),{})}}},906:function(t,e,i){var s=i(120);t.exports=function(t,e,i,n){return s(t,(function(t,s,o){e(n,i(t),s,o)})),n}},907:function(t,e,i){"use strict";i(685)},908:function(t,e,i){"use strict";i(686)},909:function(t,e,i){"use strict";i(687)},910:function(t,e,i){"use strict";i(688)},911:function(t,e,i){"use strict";i(689)},912:function(t,e,i){"use strict";i(690)},913:function(t,e,i){"use strict";i(691)},918:function(t,e,i){"use strict";var s=i(58),n=i(86),o=i(27),r=i(1),a={components:{IconButton:o.a},props:["value"],data:function(){return{copied:!1,copiedTO:null}},beforeDestroy:function(){if(this.copiedTO)return clearTimeout(this.copiedTO)},methods:{copy:function(){if(this.copiedTO&&clearTimeout(this.copiedTO),Object(r.c)(this.$refs.value))return this.$refs.value.blur(),this.copied=!0,this.copiedTO=setTimeout(()=>this.copied=!1,2500);Object(r.q)(this.$refs.value)}}},l=(i(897),i(0)),c=Object(l.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"copy",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.copy.apply(null,arguments)}}},[i("input",{ref:"value",staticClass:"copy__value",attrs:{readonly:""},domProps:{value:t.value}}),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden",mode:"out-in"}},[t.copied?i("div",{key:"success",staticClass:"copy__button"},[i("IconButton",{attrs:{icon:"success"},on:{click:t.copy}})],1):i("div",{key:"copy",staticClass:"copy__button"},[i("IconButton",{attrs:{icon:"copy"},on:{click:t.copy}})],1)])],1)}),[],!1,null,"483375e9",null).exports,u=i(153),d=i(18),h={components:{Modal:n.a,Copy:c,Input:u.a,Button:s.a,Preloader:d.a},props:["source","blog","import"],data:function(){return{layout:null,checkError:!1,checkLoading:!1,check:null,currentId:null,value:""}},computed:{checkStatus:function(){return this.checkError?"fail":null},valid:function(){var t;switch(this.source){case"livejournal":return t=/^(https?:\/\/users\.livejournal\.com(?:\/[a-z0-9_-]+))(\/\d+\.html)$/i,/^(https?:\/\/(?:[a-z0-9-]+\.)+[a-z-]{2,15})(\/\d+\.html)$/i.test(this.value)||t.test(this.value);case"telegraph":return/^https?:\/\/telegra.ph\/([^\?]+)/i.test(this.value);default:return!1}},current:function(){return this.$store.getters["imports/byId"][this.currentId||this.import]||null},layoutComputed:function(){return this.source&&this.current&&"finished"!==this.current.status?"progress":this.source&&this.current?"done":this.source&&null!=this.check?"form":"loading"}},filters:{progress:function(t){return{width:100*((null!=t?t.progress:void 0)||0)+"%"}}},watch:{layoutComputed:{handler:function(t,e){return"done"===t&&"progress"===e?this.layoutTO=setTimeout(()=>this.layout=t,1500):this.layout=t},immediate:!0}},mounted:function(){return this.$watch("source",(function(){return this.source?this.getCheck():this.clear()})),this.$watch("value",(function(){return this.checkError=!1}))},beforeDestroy:function(){if(this.layoutTO)return clearTimeout(this.layoutTO)},methods:{getCheck:function(){if(this.source)return this.$store.dispatch("imports/check",{blog_id:this.blog.id,source:this.source}).then(({check:t})=>this.check=t||!1)},submit:function(){if(this.valid)return this.checkLoading=!0,this.checkError=!1,this.trackEvent(["settings","import_start",this.source]),this.$store.dispatch("imports/import",{blog_id:this.blog.id,source:this.source,value:this.value}).then(t=>(this.currentId=t.id,this.checkLoading=!1)).catch(t=>(this.checkLoading=!1,"not_confirmed"===t?this.checkError=!0:this.errorAlert(t)))},errorAlert:function(t){var e;return e=t&&this.i18n.t.settings.errors[t]?"settings.errors."+t:"settings.errors.other",this.$store.dispatch("alerts/add",{type:"error",locale:e})},openBlog:function(){return this.$store.dispatch("blogs/settings/closeSettings"),this.$ttrouter.push({name:"blog",blog:this.blog,params:{uri:this.blog.uri}})},close:function(){return this.$emit("close")},clear:function(){return this.checkError=!1,this.checkLoading=!1,this.check=null,this.currentId=null,this.value=""}}},p=(i(898),Object(l.a)(h,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{show:!!t.source,backdrop:"dark",width:"normal"},on:{close:t.close}},[i("div",{staticClass:"importPopup"},[i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden",mode:"out-in"}},["progress"===t.layout?i("div",{key:"progress",staticClass:"importPopup__layout m_progress"},[t.source&&t.blog?i("div",{staticClass:"importPopup__transfer"},[i("div",{staticClass:"importPopup__transfer_from",class:["m_"+t.source]},[i("Icon",{attrs:{name:"logo_"+t.source}})],1),i("div",{staticClass:"importPopup__transfer_split"},[t._v("→")]),t.blog.userpic?i("div",{staticClass:"importPopup__transfer_to",style:t._f("blogUserpicStyles")(t.blog)},[i("div",{staticClass:"importPopup__transfer_to_logo"},[i("Icon",{attrs:{name:"teletype"}})],1)]):i("div",{staticClass:"importPopup__transfer_to m_logo"},[i("Icon",{attrs:{name:"teletype"}})],1)]):t._e(),i("div",{staticClass:"importPopup__progress"},[i("div",{staticClass:"importPopup__progress_bar",style:t._f("progress")(t.current)})]),i("transition-group",{staticClass:"importPopup__steps"},[i("div",{key:"pending",staticClass:"importPopup__step"},[i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden",mode:"out-in"}},[t.current.current_step||"finished"===t.current.status?i("div",{key:"done",staticClass:"importPopup__step_status m_done"},[i("Icon",{attrs:{name:"success"}})],1):i("div",{key:"loading",staticClass:"importPopup__step_status m_loading"},[i("Preloader")],1)]),i("div",{staticClass:"importPopup__step_name"},[t._v(t._s(t.$t("import.steps."+t.source+".pending")))])],1),t._l(t.current.steps,(function(e){return i("div",{key:e.step,staticClass:"importPopup__step"},[i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden",mode:"out-in"}},[1===e.progress?i("div",{key:"done",staticClass:"importPopup__step_status m_done"},[i("Icon",{attrs:{name:"success"}})],1):t.current.current_step===e.step?i("div",{key:"loading",staticClass:"importPopup__step_status m_loading"},[i("Preloader")],1):i("div",{key:"pending",staticClass:"importPopup__step_status m_pending"},[i("Icon",{attrs:{name:"pending"}})],1)]),i("div",{staticClass:"importPopup__step_name",class:e.progress<1&&t.current.current_step!==e.step?"m_pending":""},[t._v(t._s(t.$t("import.steps."+t.source+"."+e.step)))])],1)}))],2)],1):"done"===t.layout?i("div",{key:"done",staticClass:"importPopup__layout m_done"},[i("div",{staticClass:"importPopup__done"},[t.blog&&t.blog.userpic?i("div",{staticClass:"importPopup__done_userpic",style:t._f("blogUserpicStyles")(t.blog)}):i("div",{staticClass:"importPopup__done_userpic m_logo"}),i("div",{staticClass:"importPopup__done_text"},[i("div",{staticClass:"importPopup__step"},[i("div",{staticClass:"importPopup__step_status"},[i("Icon",{attrs:{name:"success"}})],1),i("div",{staticClass:"importPopup__step_name"},[t._v(t._s(t.$t("import.done.text")))])])]),i("div",{staticClass:"importPopup__done_button"},[i("Button",{attrs:{rounded:"",type:"filled",label:t.$t("import.done.button")},on:{click:t.openBlog}})],1)])]):"form"===t.layout?i("form",{key:"form",staticClass:"importPopup__layout m_form",on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[t.source&&t.blog?i("div",{staticClass:"importPopup__transfer"},[i("div",{staticClass:"importPopup__transfer_from",class:["m_"+t.source]},[i("Icon",{attrs:{name:"logo_"+t.source}})],1),i("div",{staticClass:"importPopup__transfer_split"},[t._v("→")]),t.blog.userpic?i("div",{staticClass:"importPopup__transfer_to",style:t._f("blogUserpicStyles")(t.blog)},[i("div",{staticClass:"importPopup__transfer_to_logo"},[i("Icon",{attrs:{name:"teletype"}})],1)]):i("div",{staticClass:"importPopup__transfer_to m_logo"},[i("Icon",{attrs:{name:"teletype"}})],1)]):t._e(),t.check?i("div",{staticClass:"importPopup__form"},[i("div",{staticClass:"importPopup__form_section"},[i("div",{staticClass:"importPopup__form_label m_order",attrs:{"data-order":"1"}},[t._v(t._s(t.$t("import.check.first.label")))]),t.$t("import.check.first.text")?i("div",{staticClass:"importPopup__form_text"},[t._v(t._s(t.$t("import.check.first.text")))]):t._e(),i("div",{staticClass:"importPopup__form_input"},[i("Copy",{attrs:{value:t.check}})],1)]),i("div",{staticClass:"importPopup__form_section"},[i("div",{staticClass:"importPopup__form_label m_order",attrs:{"data-order":"2"}},[t._v(t._s(t.$t("import.check.second.label")))]),t.$t("import.check.second.text")?i("div",{staticClass:"importPopup__form_text"},[t._v(t._s(t.$t("import.check.second.text")))]):t._e(),i("div",{staticClass:"importPopup__form_input"},[i("Input",{attrs:{type:"text",label:t.$t("import.input")},on:{change:function(e){return t.value=e}}}),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.checkError?i("div",{staticClass:"importPopup__form_error"},[t._v(t._s(t.$t("import.errors.not_confirmed")))]):t._e()])],1)])]):i("div",{staticClass:"importPopup__form"},[i("div",{staticClass:"importPopup__form_section"},[i("div",{staticClass:"importPopup__form_label"},[t._v(t._s(t.$t("import.import.label")))]),t.$t("import.import.text")?i("div",{staticClass:"importPopup__form_text"},[t._v(t._s(t.$t("import.import.text")))]):t._e(),i("div",{staticClass:"importPopup__form_input"},[i("Input",{attrs:{type:"text",label:t.$t("import.input")},on:{change:function(e){return t.value=e}}}),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.checkError?i("div",{staticClass:"importPopup__form_error"},[t._v(t._s(t.$t("import.errors.not_confirmed")))]):t._e()])],1)])]),i("div",{staticClass:"importPopup__submit"},[i("Button",{attrs:{rounded:"",type:"filled",label:t.$t("import.button"),loading:t.checkLoading,disabled:!t.valid},on:{click:t.submit}})],1)]):i("div",{key:"loading",staticClass:"importPopup__layout m_loading"},[i("div",{staticClass:"importPopup__loading"},[i("Preloader",{attrs:{inline:!0}})],1)])])],1)])}),[],!1,null,"381acc15",null).exports),_=i(4),m=i.n(_),g=i(32),f=i.n(g),v=i(79),b=i.n(v),C=i(598),k=i.n(C),w=i(28),$=i.n(w),y=i(2),x=i.n(y),I=i(29),P=i.n(I),T=i(19),B=i.n(T),A=(i(81),i(206)),M={name:"settings-imports",components:{Button:s.a,ImportPopup:p},props:{blog:{},sources:{default:function(){return["livejournal","telegraph"]}}},data:function(){return{popup:null,fetched:!1}},computed:{list:function(){var t,e,i;return e={},t=this.blog.id,i=this.$store.getters["imports/byKey"],x()(this.sources,(function(s){return e[s]=i[Object(A.b)({source:s,blog_id:t})]||[],!0})),e},imports:function(){return P()(this.list,(function(t){return f()(t)||null}))},unfinished:function(){return P()(this.list,(function(t){return!k()(t,{status:"finished"})}))},hasUnfinished:function(){return b()(this.unfinished)},loading:function(){return P()(this.imports,t=>!this.fetched&&null==t&&this.$store.state.imports.loading)}},filters:{progress:function(t){return{width:100*((null!=t?t.progress:void 0)||0)+"%"}},importStatus:function(t,e=""){var i;return 0===(i=$()(t.steps,(function(t,e){return t.success+=e.current-e.failed,t.failed+=e.failed,t.total+=e.total,t}),{success:0,failed:0,total:0})).success&&i.failed>0?e+"fail":i.success>0&&i.failed>0||i.success+i.failed<i.total?e+"warn":e+"done"},importValue:function(t){return t.replace(/^https?:\/\//,"").replace(/\/$/,"")},importDate:function(t,e){return B()(t).locale(e.l).format(e.t.import.date)},importSuccess:function(t){var e;return(e=m()(t.steps,{step:"article"}))?e.current:$()(t.steps,(function(t,e){return t+e.current}),0)},importFailed:function(t){var e;return(e=m()(t.steps,{step:"article"}))?e.failed:$()(t.steps,(function(t,e){return t+e.failed}),0)}},mounted:function(){return this.fetch(),this.$watch("blog",(function(){return clearTimeout(this._updateTO),this.fetched=!1,this.fetch()})),this.$watch("hasUnfinished",(function(t,e){return!t&&e?this.$store.dispatch("blogs/updateBlogPage",this.blog.id):this.autoupdate()}))},beforeDestroy:function(){return clearTimeout(this._updateTO)},methods:{fetch:function(){return this.$store.dispatch("imports/fetch",this.blog.id).then(()=>(this.fetched=!0,this.autoupdate()))},autoupdate:function(){if(this.hasUnfinished)return clearTimeout(this._updateTO),this._updateTO=setTimeout(()=>this.fetch(),2500)},openPopup:function(t){return this.trackEvent(["settings","import_click",t]),this.popup=t}}},j=(i(899),Object(l.a)(M,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"settings__form"},[i("div",{staticClass:"settings__form_content"},[i("div",{staticClass:"settings__field m_list"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.imports.title")))]),t._l(t.sources,(function(e){return i("div",{key:e,staticClass:"settings__list_item settingsImports"},[i("div",{staticClass:"settingsImports__info"},[i("div",{staticClass:"settingsImports__logo",class:["m_"+e]},[i("Icon",{attrs:{name:"logo_"+e}})],1),i("div",{staticClass:"settingsImports__content"},[i("div",{staticClass:"settingsImports__source"},[t._v(t._s(t.$t("settings.imports."+e)))]),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.unfinished[e]?i("div",{staticClass:"settingsImports__status"},[i("Icon",{staticClass:"settingsImports__status_loading",attrs:{name:"preloader_small"}}),i("span",{staticClass:"settingsImports__status_text"},[t._v(t._s(t.$t("import.steps."+e+"."+(t.imports[e].current_step||"pending"))))])],1):t._e()])],1),i("div",{staticClass:"settingsImports__actions"},[i("Button",{attrs:{rounded:"",type:"filled",label:t.$t("settings.imports.transfer"),loading:t.loading[e],disabled:t.unfinished[e]||t.loading[e]},on:{click:function(i){return t.openPopup(e)}}})],1)]),t.unfinished[e]?t._e():i("transition-group",{staticClass:"settingsImports__list",attrs:{appear:!0,"leave-to-class":"m_hidden","enter-class":"m_hidden"}},t._l(t.list[e],(function(e){return i("div",{key:e.id,staticClass:"settingsImports__import"},[i("div",{staticClass:"settingsImports__import_status",class:t._f("importStatus")(e,"m_")}),i("div",{staticClass:"settingsImports__import_content"},[i("a",{staticClass:"settingsImports__import_value",attrs:{href:e.value,rel:"nofollow",target:"_blank"}},[t._v(t._s(t._f("importValue")(e.value)))]),i("div",{staticClass:"settingsImports__import_info"},[e.steps.length>1||e.steps[0].total>1?i("div",{staticClass:"settingsImports__import_info_item"},[t._v(t._s(t.$t("import.success"))+": "+t._s(t._f("importSuccess")(e)))]):t._e(),e.steps.length>1||e.steps[0].total>1?i("div",{staticClass:"settingsImports__import_info_item"},[t._v(t._s(t.$t("import.failed"))+": "+t._s(t._f("importFailed")(e)))]):t._e(),i("div",{staticClass:"settingsImports__import_info_item"},[t._v(t._s(t._f("importDate")(e.finished_at,t.i18n)))])])])])})),0)],1)}))],2)]),i("ImportPopup",{attrs:{source:t.popup,blog:t.blog},on:{close:function(e){t.popup=null}}})],1)}),[],!1,null,"04a1c0c2",null));e.a=j.exports},919:function(t,e,i){"use strict";var s=i(18),n=i(58),o=i(153),r=i(551),a=i(6),l=i.n(a),c=i(593),u=i.n(c),d=i(4),h=i.n(d),p=i(83),_=i.n(p),m={props:["name","value"],data:function(){return{inProgress:!1,inDrag:!1,file:null,current:null}},computed:{config:function(){return this.$store.state.config.app.media},accept:function(){return l()(this.config.accept,(function(t){return t.types.join(",")})).join(",")},isExists:function(){return!!this.current||!!this.value},userpicStyle:function(){return this.current||this.value?{"background-image":`url('${this.current||this.value}')`}:null}},watch:{value:function(){if(this.value!==this.file)return this.removeFile()}},methods:{click:function(){return this.$refs.file.click()},dragEnter:function(t){return this.inDrag=!0,this.drag(t)},dragLeave:function(t){return this.inDrag=!1,this.drag(t)},drag:function(t){return t.preventDefault(),t.stopPropagation(),!1},drop:function(t){var e;return t.preventDefault(),t.stopPropagation(),this.inDrag=!1,e=t.dataTransfer.files,this.$emit("click"),this.setFile(e[0]),!1},input:function(t){var e;return(e=this.$refs.file.files[0])?this.setFile(e):this.removeFile()},checkFile:function(t){return this.config.max_userpic_size>0&&t.size>this.config.max_userpic_size?"file_to_large":u()(this.config.accept)>0&&!h()(this.config.accept,(function(e){return _()(e.types,t.type)}))&&"unsupported_media_type"},setFile:function(t){var e;return(e=this.checkFile(t))?this.$emit("error",e,this.name):(this.inProgress=!0,this.$modules.$media.toURL(t).then(e=>(this.file=t,this.current=e,this.inProgress=!1,this.$emit("input",this.file,this.name),this.$emit("change",this.file,this.name))))},removeFile:function(){var t;if(this.file&&(this.file=null,this.$emit("input",this.value,this.name),this.$emit("change",this.value,this.name)),this.current)return null!=(t=window.URL)&&"function"==typeof t.revokeObjectURL&&t.revokeObjectURL(this.current),this.current=null}}},g=(i(891),i(0)),f=Object(g.a)(m,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{staticClass:"userpicInput",class:{m_exists:t.isExists,m_progress:t.inProgress},on:{dragenter:t.dragEnter,dragover:t.dragEnter,dragleave:t.dragLeave,drop:t.drop}},[i("input",{ref:"file",staticClass:"userpicInput__input",attrs:{type:"file",name:t.name,accept:t.accept},on:{change:t.input,click:function(e){return t.$emit("click")}}}),i("div",{staticClass:"userpicInput__current",class:{m_empty:!t.userpicStyle,m_drag:t.inDrag},style:t.userpicStyle}),i("transition",{attrs:{mode:"out-in","enter-class":"m_hidden","leave-to-class":"m_hidden","enter-active-class":"m_transition","leave-active-class":"m_transition"}},[t.inProgress?i("div",{key:"progress",staticClass:"userpicInput__progress"},[i("Icon",{attrs:{name:"preloader"}})],1):i("div",{key:"upload",staticClass:"userpicInput__state",class:{m_drag:t.inDrag}},[i("Icon",{attrs:{name:"upload"}})],1)])],1)}),[],!1,null,"67727a53",null).exports,v=i(24),b=i.n(v),C=i(21),k=i.n(C),w=i(892),$=i.n(w),y=i(29),x=i.n(y),I=i(2),P=i.n(I),T=i(10),B=i.n(T),A=i(61),M=i.n(A),j=i(559),E=i.n(j),D={name:"settings-main",components:{Preloader:s.a,Button:n.a,Input:o.a,Checkbox:r.a,UserpicInput:f},props:["blog"],data:function(){return{fields:{uri:null,name:null,bio:null,website:null,userpic:null,list_style:null,show_teammates:!1,show_topics_menu:!1,comments_enabled:!1,reactions_enabled:!1},submiting:!1,error:{field:null,text:null}}},computed:{blogFields:function(){var t;return this.blog?(t={},P()(B()(this.fields),e=>{var i;return i=this.blog[e],$()(this.fields[e])&&(i=!!i),t[e]=i,!0}),t):{}},changedFields:function(){var t;return t=[],P()(B()(this.fields),e=>{var i,s,n;if(n=this.fields[e],s=null!=(i=this.blog)?i[e]:void 0,$()(n)&&(s=!!s),n!==s)return t.push(e)}),t},invalidFields:function(){var t;return t=[],P()(B()(this.fields),e=>{if(!this.isValidField(e,this.fields[e]))return t.push(e)}),t},hasChanges:function(){return!b()(this.changedFields)},isValid:function(){return b()(this.invalidFields)},serviceLink:function(){return this.$store.state.config.app.url.site.replace(/^https?:\/\//i,"")+"/@"}},watch:{blog:{handler:"initFields",immediate:!0},changedFields:{handler:"unsetError"}},methods:{submit:function(t){var e,i,s,n;if(t.preventDefault(),!this.submiting&&this.hasChanges&&this.isValid)return this.submiting=!0,s=this.blog.id,i=x()(M()(this.fields,this.changedFields),(t,e)=>this.prepareField(e,t)),n=this.blog.uri,e=()=>this.$store.dispatch("blogs/settings/edit",{id:s,fields:i}).then(()=>{var t;if(this.submiting=!1,(t=this.$route).params.uri===n&&i.uri)return t.params.uri=i.uri,this.$router.replace(t)},t=>(this.submiting=!1,"already_exists"===(null!=t?t.error:void 0)?this.setError("uri","uri_already_exists"):this.setError(null,null!=t?t.error:void 0))),i.userpic instanceof File?this.$modules.$media.upload(i.userpic,"userpics").then((function({url:t}){return t?i.userpic=t:delete i.userpic,e()}),t=>(this.submiting=!1,this.setError(null,null!=t?t.error:void 0))):e()},reset:function(t){return t.preventDefault(),this.initFields()},setError:function(t=null,e=null){var i;return i=this.i18n.t.settings.errors[e]?"settings.errors."+e:"settings.errors.other",t?(this.error.field=t,this.error.text=e?this.$t(i):null):this.$store.dispatch("alerts/add",{type:"error",locale:i})},unsetError:function(){return this.error.field=null,this.error.text=null},clickUserpic:function(){return this.$refs.userpic.click()},onClickUserpic:function(){return this.trackEvent(["settings","click_uploadimage"])},prepareField:function(t,e){switch(t){case"uri":if(k()(e))return null!=e?e.toLowerCase():void 0;break;case"website":if(!e)return null;if(!/^https?:\/\//i.test(e))return e.replace(/^(\w+:)?\/?\/?/,"http://")}return e},isValidField:function(t,e){var i,s;switch(t){case"uri":return E.a.URI.test(e);case"name":return!e||0<=(i=e.length)&&i<=100;case"bio":return!e||0<=(s=e.length)&&s<=150;case"website":if(!e)return!0;try{window.URL&&(e=new URL(e).toString())}catch(t){}return E.a.WEBSITE.test(e);default:return!0}},initFields:function(){if(this.blog)return P()(B()(this.fields),t=>{var e;return e=this.blog[t],$()(this.fields[t])&&(e=!!e),this.fields[t]=e,!0})}}},N=Object(g.a)(D,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.blog?i("form",{staticClass:"settings__form",attrs:{name:"main"},on:{submit:t.submit}},[i("button",{staticClass:"settings__submit",attrs:{type:"submit",tabindex:"-1"}}),i("div",{staticClass:"settings__form_content"},[i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.userpic.title")))]),i("div",{staticClass:"settings__field_input m_rows"},[i("div",{staticClass:"settings__col"},[i("UserpicInput",{ref:"userpic",attrs:{name:"userpic"},on:{click:t.onClickUserpic,error:function(e){return t.setError(null,e)}},model:{value:t.fields.userpic,callback:function(e){t.$set(t.fields,"userpic",e)},expression:"fields.userpic"}})],1),i("div",{staticClass:"settings__col m_actions"},[i("div",{staticClass:"settings__field_description"},[i("Button",{attrs:{type:"text",display:"inline",color:"secondary",label:t.$t("settings.userpic.save")},on:{click:t.clickUserpic}})],1),i("div",{staticClass:"settings__field_description"},[i("Button",{attrs:{type:"text",display:"inline",color:"secondary",label:t.$t("settings.userpic.remove"),disabled:!t.fields.userpic},on:{click:function(e){t.fields.userpic=null}}})],1)])]),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.error.text&&"userpic"===t.error.field?i("div",{staticClass:"settings__field_error",domProps:{innerHTML:t._s(t.error.text)}}):t._e()])],1),i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.uri.title")))]),i("div",{staticClass:"settings__field_input"},[i("Input",{attrs:{name:"uri",label:t.$t("settings.uri.placeholder"),prefix:t.serviceLink,readonly:!t.blog.admin,max:30},model:{value:t.fields.uri,callback:function(e){t.$set(t.fields,"uri",e)},expression:"fields.uri"}})],1),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.error.text&&"uri"===t.error.field?i("div",{staticClass:"settings__field_error",domProps:{innerHTML:t._s(t.error.text)}}):t._e()])],1),i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.name.title")))]),i("div",{staticClass:"settings__field_input"},[i("Input",{attrs:{name:"name",label:t.$t("settings.name.placeholder"),max:100},model:{value:t.fields.name,callback:function(e){t.$set(t.fields,"name",e)},expression:"fields.name"}})],1),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.error.text&&"name"===t.error.field?i("div",{staticClass:"settings__field_error",domProps:{innerHTML:t._s(t.error.text)}}):t._e()])],1),i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.bio.title")))]),i("div",{staticClass:"settings__field_input"},[i("Input",{attrs:{name:"bio",mode:"textarea",label:t.$t("settings.bio.placeholder"),max:150,counter:!0},model:{value:t.fields.bio,callback:function(e){t.$set(t.fields,"bio",e)},expression:"fields.bio"}})],1),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.error.text&&"bio"===t.error.field?i("div",{staticClass:"settings__field_error",domProps:{innerHTML:t._s(t.error.text)}}):t._e()])],1),i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.website.title")))]),i("div",{staticClass:"settings__field_input"},[i("Input",{attrs:{name:"website",label:t.$t("settings.website.placeholder"),max:450},model:{value:t.fields.website,callback:function(e){t.$set(t.fields,"website",e)},expression:"fields.website"}})],1),i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.error.text&&"website"===t.error.field?i("div",{staticClass:"settings__field_error",domProps:{innerHTML:t._s(t.error.text)}}):t._e()])],1),i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.list_style.title")))]),i("div",{staticClass:"settings__field_input"},[i("Checkbox",{attrs:{name:"comments_enabled",label:t.$t("settings.comments_enabled")},model:{value:t.fields.comments_enabled,callback:function(e){t.$set(t.fields,"comments_enabled",e)},expression:"fields.comments_enabled"}}),i("Checkbox",{attrs:{name:"reactions_enabled",label:t.$t("settings.reactions_enabled")},model:{value:t.fields.reactions_enabled,callback:function(e){t.$set(t.fields,"reactions_enabled",e)},expression:"fields.reactions_enabled"}}),i("Checkbox",{attrs:{name:"show_teammates",label:t.$t("settings.show_teammates")},model:{value:t.fields.show_teammates,callback:function(e){t.$set(t.fields,"show_teammates",e)},expression:"fields.show_teammates"}}),i("Checkbox",{attrs:{name:"show_topics_menu",label:t.$t("settings.show_topics_menu")},model:{value:t.fields.show_topics_menu,callback:function(e){t.$set(t.fields,"show_topics_menu",e)},expression:"fields.show_topics_menu"}})],1)])]),i("div",{staticClass:"settings__form_footer"},[i("Button",{attrs:{rounded:"",label:t.$t("settings.cancel"),disabled:!t.hasChanges||t.submiting},on:{click:t.reset}}),i("Button",{attrs:{rounded:"",type:"filled",label:t.$t("settings.save"),loading:t.submiting,disabled:!(t.isValid&&t.hasChanges||t.submiting)},on:{click:t.submit}})],1)]):i("div",{staticClass:"settings__empty"},[i("Preloader")],1)}),[],!1,null,null,null);e.a=N.exports},920:function(t,e,i){"use strict";var s=i(18),n=i(581),o=i(154),r=i(58),a=i(82),l={components:{Userpic:o.a,Button:r.a,Dropdown:a.a},props:["teammate","blog","actons_open"],data:function(){return{loading:!1}},computed:{id:function(){return this.teammate.id},profile:function(){return this.$store.getters["account/profile"]},itsMe:function(){return this.profile.id===this.teammate.id},canChangeRights:function(){return!this.teammate.owner&&this.blog.admin},canDelete:function(){return!(this.blog.teammates.length<=1)&&(!(this.teammate.owner&&!this.itsMe)&&((!this.blog.personal||this.blog.id!==this.teammate.id)&&(!!this.itsMe||this.blog.admin)))}},methods:{closeActions:function(){if(this.actons_open===this.id)return this.$emit("actions",null)},toggleActions:function(){return this.$emit("actions",this.actons_open===this.id?null:this.id)},editTeammate:function(t){var e,i;return i=this.id,e=this.blog.id,this.loading=!0,this.closeActions(),this.$store.dispatch("blogs/settings/editTeammate",{id:i,blog_id:e,admin:t}).then(()=>this.loading=!1,()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),this.loading=!1))},removeTeammate:function(){var t,e,i;return e=this.id,t=this.blog.id,this.loading=!0,this.closeActions(),i=this.teammate.name||"@"+this.teammate.uri,this.$store.dispatch("confirms/add",{message:this.$t("confirms.remove_teammate",{user:i}),type:"delete"}).then(()=>this.$store.dispatch("blogs/settings/removeTeammate",{id:e,blog_id:t}),(function(){})).then(()=>this.loading=!1,()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),this.loading=!1))}}},c=(i(893),i(0)),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"settings__list_item settingsTeammate"},[i("div",{staticClass:"settingsTeammate__content"},[i("Userpic",{staticClass:"settingsTeammate__userpic",attrs:{blog:t.teammate}}),i("div",{staticClass:"settingsTeammate__name"},[i("span",[t._v(t._s(t._f("blogName")(t.teammate)))]),t.teammate.verified?i("span",{staticClass:"settingsTeammate__name_verified"}):t._e()])],1),i("div",{staticClass:"settingsTeammate__actions"},[t.canChangeRights||t.canDelete?i("Dropdown",{attrs:{show:t.actons_open===t.teammate.id,anchor:t.$refs.action},on:{close:t.closeActions}},[t.canChangeRights&&t.teammate.admin?i("div",{staticClass:"dropdown__item",on:{click:function(e){return t.editTeammate(!1)}}},[i("span",{staticClass:"dropdown__item_text"},[t._v(t._s(t.$t("settings.teammates.unmake_admin")))])]):t.canChangeRights?i("div",{staticClass:"dropdown__item",on:{click:function(e){return t.editTeammate(!0)}}},[i("span",{staticClass:"dropdown__item_text"},[t._v(t._s(t.$t("settings.teammates.make_admin")))])]):t._e(),t.canDelete?i("div",{staticClass:"dropdown__item m_danger",on:{click:t.removeTeammate}},[i("span",{staticClass:"dropdown__item_text"},[t._v(t._s(t.$t("settings.teammates.delete")))])]):t._e()]):t._e(),i("Button",{ref:"action",attrs:{type:"text",display:"inline",color:"secondary",label:t.teammate.admin?t.$t("settings.teammates.admin"):t.$t("settings.teammates.not_admin"),dropdown:t.actons_open===t.teammate.id,loading:t.loading,disabled:!t.canChangeRights&&!t.canDelete},on:{click:t.toggleActions}})],1)])}),[],!1,null,"818786a0",null).exports,d={name:"settings-teammates",components:{Preloader:s.a,SuggestedInput:n.a,SettingsTeammate:u},props:["blog"],data:function(){return{render:!1,adding_teammate:null,actons_open:null}},computed:{teammates:function(){var t;return(null!=(t=this.blog)?t.teammates:void 0)||[]}},methods:{addTeammate:function(t){var e;return this.adding_teammate=t,e=this.blog.id,this.$store.dispatch("blogs/settings/addTeammate",{blog_id:e,id:t}).then(()=>this.adding_teammate=null,()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),this.adding_teammate=null))}},mounted:function(){return this.render=!0}},h=Object(c.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.blog?i("div",{staticClass:"settings__form"},[i("div",{staticClass:"settings__form_content"},[t.blog.admin?i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_input m_rows"},[i("div",{staticClass:"settings__col m_main"},[i("SuggestedInput",{attrs:{name:"suggest_teammates",type:"blog",action:"blogs/settings/suggestTeammates",getter:"blogs/settings/suggestedTeammates",placeholder:t.$t("settings.teammates.placeholder"),value:t.adding_teammate,loading:!!t.adding_teammate,queryParams:{blog_id:t.blog.id,limit:3}},on:{change:t.addTeammate}})],1)])]):t._e(),i("div",{staticClass:"settings__field m_list"},[i("div",{staticClass:"settings__field_title m_list"},[t._v(t._s(t.$t("settings.teammates.list")))]),i("transition-group",{staticClass:"settings__list",attrs:{tag:"div",appear:t.render,"leave-to-class":"m_hidden","enter-class":"m_hidden","appear-class":"m_hidden"}},t._l(t.teammates,(function(e){return i("SettingsTeammate",{key:e.id,attrs:{teammate:e,blog:t.blog,actons_open:t.actons_open},on:{actions:function(e){return t.actons_open=e}}})})),1)],1)])]):i("div",{staticClass:"settings__empty"},[i("Preloader")],1)}),[],!1,null,null,null);e.a=h.exports},921:function(t,e,i){"use strict";var s=i(153),n=i(701),o=i(58),r=i(18),a=i(612).a,l=(i(896),i(0)),c=Object(l.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(t.editing?"form":"div",{tag:"component",staticClass:"settingsMenuItem",on:{submit:function(e){return e.preventDefault(),t.editMenu.apply(null,arguments)}}},[t.editing?i("div",{staticClass:"settingsMenuItem__content"},[i("div",{staticClass:"settingsMenuItem__field"},[i("Input",{attrs:{label:t.$t("settings.menu.name"),max:100},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),i("div",{staticClass:"settingsMenuItem__field"},[i("Input",{attrs:{label:t.$t("settings.menu.url"),max:500},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1)]):i("div",{staticClass:"settingsMenuItem__content"},[i("div",{staticClass:"settingsMenuItem__name"},[t._v(t._s(t._f("unescape")(t.value.name)))]),i("div",{staticClass:"settingsMenuItem__link"},[t._v(t._s(t.value.url))])]),t.editing?i("div",{staticClass:"settingsMenuItem__actions"},[i("div",{staticClass:"settingsMenuItem__actions_item"},[i("Button",{attrs:{type:"text",display:"inline",color:"secondary",icon:"enter",action:"submit",loading:"edit"===t.loading,disabled:!t.valid},on:{click:t.editMenu}})],1),i("div",{staticClass:"settingsMenuItem__actions_item"},[i("Button",{attrs:{type:"text",display:"inline",color:"secondary",icon:"close",disabled:!!t.loading},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleEditing(!1)}}})],1)]):i("div",{staticClass:"settingsMenuItem__actions"},[t.sorting?i("div",{staticClass:"settingsMenuItem__actions_item"},[i("Button",{attrs:{type:"text",display:"inline",color:"secondary",icon:"send",loading:"sort"===t.loading},on:{click:function(e){return e.stopPropagation(),t.$emit("sort")}}})],1):t._e(),i("div",{staticClass:"settingsMenuItem__actions_item"},[i("Button",{attrs:{type:"text",display:"inline",color:"secondary",icon:"article_edit"},on:{click:function(e){return e.stopPropagation(),t.toggleEditing(!0)}}})],1),i("div",{staticClass:"settingsMenuItem__actions_item"},[i("Button",{attrs:{type:"text",display:"inline",color:"secondary",icon:"trash",loading:"remove"===t.loading},on:{click:function(e){return t.removeMenu(t.id)}}})],1)])])}),[],!1,null,"8ee6cc8a",null).exports,u=i(6),d=i.n(u),h=i(23),p=i.n(h),_={name:"settings-menu",components:{Input:s.a,SettingsTopic:n.a,Button:o.a,Preloader:r.a,SettingsMenuItem:c},props:["blog"],data:function(){return{iterator:0,newItem:{name:"",url:""},items:[],render:!1,editing:null,loading:{}}},computed:{config:function(){return this.$store.state.config.app},menu:function(){var t;return(null!=(t=this.blog)?t.menu:void 0)||[]},newValid:function(){return!!this.isValidField("name",this.newItem.name)&&!!this.isValidField("url",this.newItem.url)},sortable:function(){return!this.editing&&this.items.length>1}},watch:{menu:{immediate:!0,handler:"reset"}},mounted:function(){return this.render=!0},methods:{addNew:function(){var t,e,i;if(this.newValid)return({name:e,url:i}=this.newItem),t=d()(this.items,"value"),t=[...t,{name:e,url:i}],this.save(t,{id:"new",action:"add"}).then(()=>this.resetNew(),()=>{})},resetNew:function(){return this.newItem.name="",this.newItem.url=""},reset:function(){var t,e;return e=0,t={},this.items=d()(this.menu,i=>{var s;return s=i.name+"__",t[s]&&(s+=++e),{id:s,value:i}})},save:function(t,e=!0){var i;return this.loading.action?Promise.resolve():(this.loading=e,i=this.blog.id,t=d()(t,t=>(/^(https?:\/\/|mailto:|tel:)/i.test(t.url)||(t.url=t.url.replace(/^(\w+:)?\/?\/?/,"http://")),t.url=this.$ttrouter.href(t.url),t)),this.$store.dispatch("blogs/settings/saveMenu",{blog_id:i,items:t}).then(()=>(this.loading={},this.editing=null),()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),this.loading={})))},toggleEditing:function(t,e){return this.editing=e?t:null},edit:function(t,e){var i;return i=d()(this.items,(function(i){return i.id===t?e:i.value})),this.save(i,{id:t,action:"edit"})},remove:function(t){var e;return e=p()(this.items,{id:t}),this.save(d()(e,"value"),{id:t,action:"remove"})},sort:function(t,e){var i,s;if(e>0)return i=this.items[e],(s=this.items.slice(0)).splice(e,1),s.splice(e-1,0,i),this.items=s,this.save(d()(s,"value"),{id:t,action:"sort"})},isValidField:function(t,e){var i;switch(t){case"name":return!e||0<=(i=e.length)&&i<=100;case"url":if(!e)return!1;try{window.URL&&(e=new URL(e).toString())}catch(t){}return/^(https?:)?(\/\/)?[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]$/i.test(e)}}}},m=Object(l.a)(_,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.blog?i("div",{staticClass:"settings__form"},[i("div",{staticClass:"settings__form_content"},[t.items.length<t.config.max_menu_items?i("form",{staticClass:"settings__field",on:{submit:function(e){return e.preventDefault(),t.addNew.apply(null,arguments)}}},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.menu.create")))]),i("div",{staticClass:"settings__field_input m_rows"},[i("div",{staticClass:"settings__col m_main"},[i("Input",{attrs:{label:t.$t("settings.menu.name"),name:"menu_name",max:100},model:{value:t.newItem.name,callback:function(e){t.$set(t.newItem,"name",e)},expression:"newItem.name"}})],1),i("div",{staticClass:"settings__col m_main"},[i("Input",{attrs:{label:t.$t("settings.menu.url"),name:"menu_url",max:500},model:{value:t.newItem.url,callback:function(e){t.$set(t.newItem,"url",e)},expression:"newItem.url"}})],1),i("div",{staticClass:"settings__col"},[i("Button",{attrs:{rounded:"",type:"filled",label:t.$t("settings.menu.add"),loading:"new"===t.loading.id,disabled:!t.newValid},on:{click:t.addNew}})],1)]),0===t.items.length?i("div",{staticClass:"settings__field_text"},[i("p",[t._v(t._s(t.$t("settings.menu.empty.text")))]),i("p",[t._v(t._s(t.$t("settings.menu.empty.counter.prefix",t.config))+"\n "+t._s(t.$t("settings.menu.empty.count",t.config.max_menu_items))+"\n"+t._s(t.$t("settings.menu.empty.counter.suffix",t.config)))])]):t._e()]):t._e(),t.items.length>0?i("div",{staticClass:"settings__field m_list"},[i("div",{staticClass:"settings__field_title m_list"},[t._v(t._s(t.menu.length)+" "+t._s(t.$t("settings.menu.list",t.menu.length)))]),i("transition-group",{staticClass:"settings__list",attrs:{tag:"div",appear:t.render,"leave-to-class":"m_hidden","enter-class":"m_hidden","appear-class":"m_hidden"}},t._l(t.items,(function(e,s){return i("SettingsMenuItem",{key:e.id,staticClass:"settings__list_item",attrs:{id:e.id,value:e.value,editing:t.editing===e.id,sorting:s>0||t.loading.id===e.id&&"sort"===t.loading.action,loading:t.loading.id===e.id?t.loading.action:null,validator:t.isValidField},on:{editing:function(i){return t.toggleEditing(e.id,i)},edit:function(i){return t.edit(e.id,i)},sort:function(i){return t.sort(e.id,s)},remove:function(i){return t.remove(e.id)}}})})),1)],1):t._e()])]):i("div",{staticClass:"settings__empty"},[i("Preloader")],1)}),[],!1,null,null,null);e.a=m.exports},922:function(t,e,i){"use strict";var s=i(18),n=i(58),o=i(551),r=i(613).a,a=(i(900),i(0)),l=Object(a.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{show:t.show,backdrop:"dark",width:"form"},on:{close:t.close}},[i("form",{staticClass:"settingsPassword",on:{submit:t.submit}},[i("button",{staticClass:"settingsPassword__submit",attrs:{type:"submit",tabindex:"-1"}}),i("div",{staticClass:"settingsPassword__caption"},[i("div",{staticClass:"settingsPassword__caption_title"},[t._v(t._s(t.$t("settings.password.title")))]),i("div",{staticClass:"settingsPassword__caption_close"},[i("IconButton",{attrs:{icon:"close"},on:{click:t.close}})],1)]),i("div",{staticClass:"settingsPassword__form"},[i("div",{staticClass:"settingsPassword__field"},[i("Input",{ref:"old_password",attrs:{name:"old_password",type:"password",label:t.$t("settings.password.old_password"),value:t.fields.old_password,max:255,autocomplete:"current-password"},on:{change:function(e){return t.fields.old_password=e}}})],1),i("div",{staticClass:"settingsPassword__field"},[i("Input",{ref:"password",attrs:{name:"password",type:"password",label:t.$t("settings.password.password"),value:t.fields.password,max:255,autocomplete:"new-password"},on:{change:function(e){return t.fields.password=e}}})],1),i("div",{staticClass:"settingsPassword__field"},[i("Input",{ref:"confirm_password",attrs:{name:"confirm_password",type:"password",label:t.$t("settings.password.confirm_password"),value:t.fields.confirm_password,max:255,autocomplete:"new-password"},on:{change:function(e){return t.fields.confirm_password=e}}})],1)]),i("div",{staticClass:"settingsPassword__footer"},[i("div",{staticClass:"settingsPassword__footer_item"},[i("Button",{attrs:{rounded:"",label:t.$t("settings.cancel"),disabled:t.submiting},on:{click:t.close}})],1),i("div",{staticClass:"settingsPassword__footer_item"},[i("Button",{attrs:{rounded:"",type:"filled",label:t.$t("settings.save"),loading:t.submiting,disabled:!t.submiting&&!t.isValid},on:{click:t.submit}})],1)])])])}),[],!1,null,"3aeebcef",null).exports,c=i(901),u=i.n(c),d=i(902),h=i.n(d),p=i(903),_=i.n(p),m=i(10),g=i.n(m),f=i(2),v=i.n(f),b=i(160),C=i.n(b),k=i(904),w=i.n(k),$={name:"settings-account",components:{Preloader:s.a,Button:n.a,Checkbox:o.a,SettingsPassword:l,IconThemeSystem:u.a,IconThemeDark:h.a,IconThemeLight:_.a},props:["blog"],data:function(){return{password_popup:!1,darkmode_dropdown:!1,lang_dropdown:!1,setting_darkmode:!1,setting_lang:!1,setting_allow_inviting:!1,unlinking:!1,deleteing:!1}},computed:{config:function(){return this.$store.state.config.app},account:function(){return this.$store.state.account},darkmode:function(){return{system:null,dark:!0,light:!1}},darkmodeNames:function(){return w()(this.darkmode)},darkmodeName:function(){return this.darkmodeNames[this.account.darkmode]},darkmodeLabel:function(){return this.$t("settings.account.appearance.theme."+this.darkmodeName)},langs:function(){return this.$store.getters["langs/list"]},langsTexts:function(){return this.$store.getters["langs/texts"]},itsMe:function(){return this.blog.id===this.account.id},deleteAction:function(){return this.blog.owner||this.blog.personal&&this.itsMe?"delete":"leave"},canUnlink:function(){return C()([this.blog.email,this.blog.facebook_id,this.blog.google_id,this.blog.telegram_id,this.blog.twitch_id,this.blog.apple_id]).length>1},blogIds:function(){return{facebook:this.blog.facebook_id,google:this.blog.google_id,telegram:this.blog.telegram_id,twitch:this.blog.twitch_id,apple:this.blog.apple_id}},socials:function(){return g()(this.blogIds)},supporting:function(){var t;return t={},v()(this.$store.getters["auth/supporting"],(function(e){return t[e]=!0})),t},inProcess:function(){return this.$store.state.auth.inProcess},linking:function(){var t;return null!=(t=this.inProcess)?t.type:void 0},iframes:function(){return this.$store.getters["auth/iframes"]},blogName:function(){return this.blog?this.blog.name||"@"+this.blog.uri:null}},filters:{socialString:function(t,e){var i;return i=[],t[e+"_name"]&&i.push(t[e+"_name"]),t[e+"_username"]&&i.push(t[e+"_username"]),t[e+"_email"]&&i.push(t[e+"_email"]),i.join(", ")}},watch:{inProcess:function(){return this._process()},password_popup:function(){if(this.password_popup)return this.darkmode_dropdown=!1,this.lang_dropdown=!1},darkmode_dropdown:function(){if(this.darkmode_dropdown)return this.password_popup=!1,this.lang_dropdown=!1},lang_dropdown:function(){if(this.lang_dropdown)return this.password_popup=!1,this.darkmode_dropdown=!1}},methods:{_process:function(){if(this.inProcess)return this.inProcess.promise.then(()=>this.$store.dispatch("blogs/settings/byId",{id:this.blog.id,force:!0})).catch(t=>{var e;return"already_connected"===(null!=t&&null!=(e=t.data)?e.error:void 0)?this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.already_connected"}):this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"})})},link:function(t){if(t)return this.$store.dispatch("account/"+t).then(()=>this.$store.dispatch("blogs/settings/byId",{id:this.blog.id,force:!0})).catch(()=>{})},unlink:function(t){if(!this.unlinking)return this.unlinking=t,this.$store.dispatch("account/unlink",t).then(()=>this.$store.dispatch("blogs/settings/byId",{id:this.blog.id,force:!0})).catch(()=>this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"})).then(()=>this.unlinking=!1)},setDarkmode:function(t){if(this.darkmode_dropdown=!1,!this.setting_darkmode)return this.setting_darkmode=t,this.$store.dispatch("account/setDarkmode",t).catch(()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),!0)).then(()=>this.setting_darkmode=!1)},setLang:function(t){if(this.lang_dropdown=!1,!this.setting_lang)return this.setting_lang=t,this.$store.dispatch("langs/lang",t),this.$store.dispatch("account/setLang",t).catch(()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),!0)).then(()=>this.setting_lang=!1)},setAllowInviting:function(t){if(!this.setting_allow_inviting)return this.setting_allow_inviting=!0,this.$store.dispatch("account/setAllowInviting",t).catch(()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),!0)).then(()=>this.setting_allow_inviting=!1)},deleteBlog:function(t=!1){var e,i;return"",e=this.blogName,i=t?"confirms.leave":"confirms.blog",this.deleteing=!0,this.$store.dispatch("confirms/add",{message:this.$t(i,{blog:e}),type:t?"leave":"delete",icon:t?null:"trash_big"}).then(()=>{var t;return t=this.itsMe,this.$store.dispatch("blogs/settings/delete",this.blog.id).then(()=>{if(this.trackEvent(["settings","delete_blog"]),t?this.logout():this.$emit("blog",null),this.$route.params.uri&&this.blog.uri)return this.$ttrouter.replace({name:"main",domain:null})})},(function(){})).then(()=>this.deleteing=!1).catch(()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),this.deleteing=!1))},signOut:function(){return this.logout(),this.trackEvent(["settings","sign_out"])},logout:function(){return this.$store.dispatch("account/logout")}}},y=(i(907),Object(a.a)($,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.blog&&t.itsMe?i("div",{staticClass:"settings__form"},[i("div",{staticClass:"settings__form_content"},[i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.account.title")))]),i("div",{staticClass:"settings__field_list"},[t.blog.email?i("div",{staticClass:"settings__list_item settingsAccount"},[i("div",{staticClass:"settingsAccount__icon m_email"},[i("Icon",{attrs:{name:"email"}})],1),i("div",{staticClass:"settingsAccount__content"},[i("div",{staticClass:"settingsAccount__label"},[t._v(t._s(t.$t("settings.account.email")))]),t.blog.email?i("div",{staticClass:"settingsAccount__label m_sub"},[t._v(t._s(t.blog.email))]):t._e()]),i("div",{staticClass:"settingsAccount__actions"},[i("Button",{attrs:{type:"text",display:"inline",color:"secondary",label:t.$t("settings.account.change_password")},on:{click:function(e){t.password_popup=!t.password_popup}}})],1),i("SettingsPassword",{attrs:{show:t.password_popup},on:{close:function(e){t.password_popup=!1}}})],1):t._e(),t._l(t.socials,(function(e){return i("div",{key:e,staticClass:"settings__list_item settingsAccount"},[i("div",{staticClass:"settingsAccount__icon",class:"m_"+e},[i("Icon",{attrs:{name:"logo_"+e}})],1),i("div",{staticClass:"settingsAccount__content"},[i("div",{staticClass:"settingsAccount__label"},[t._v(t._s(t.$t("settings.account."+e)))]),t.blogIds[e]?i("div",{staticClass:"settingsAccount__label m_sub"},[t._v(t._s(t._f("socialString")(t.blog,e)))]):t._e()]),t.supporting[e]&&!t.blogIds[e]?i("div",{staticClass:"settingsAccount__actions"},[i("Button",{attrs:{type:"text",display:"inline",color:"secondary",label:t.$t("settings.account.link"),loading:t.linking===e,frame:t.iframes[e]},on:{click:function(i){return t.link(e)}}})],1):t.canUnlink?i("div",{staticClass:"settingsAccount__actions"},[i("Button",{attrs:{type:"text",display:"inline",color:"secondary",label:t.$t("settings.account.unlink"),loading:t.unlinking===e},on:{click:function(i){return t.unlink(e)}}})],1):t._e()])}))],2)]),i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.account.appearance.title")))]),i("div",{staticClass:"settings__field_list"},[i("div",{staticClass:"settings__list_item settingsAccount"},[i("div",{staticClass:"settingsAccount__icon"},[i("icon-theme-"+t.darkmodeName,{tag:"component"})],1),i("div",{staticClass:"settingsAccount__content"},[i("span",{staticClass:"settingsAccount__label"},[t._v(t._s(t.$t("settings.account.appearance.theme.label")))])]),i("div",{staticClass:"settingsAccount___actions"},[i("Button",{ref:"darkmode",attrs:{type:"text",display:"inline",color:"secondary",label:t.darkmodeLabel,dropdown:t.darkmode_dropdown,loading:t.setting_darkmode},on:{click:function(e){t.darkmode_dropdown=!t.darkmode_dropdown}}})],1),i("Dropdown",{attrs:{show:t.darkmode_dropdown,anchor:t.$refs.darkmode},on:{close:function(e){t.darkmode_dropdown=!1}}},t._l(t.darkmode,(function(e,s){return i("div",{staticClass:"dropdown__item",on:{click:function(i){return t.setDarkmode(e)}}},[i("span",{staticClass:"dropdown__item_text"},[t._v(t._s(t.$t("settings.account.appearance.theme."+s)))]),t.account.darkmode===e?i("div",{staticClass:"dropdown__item_checked"},[i("Icon",{attrs:{name:"checked"}})],1):t._e()])})),0)],1),i("div",{staticClass:"settings__list_item settingsAccount"},[i("div",{staticClass:"settingsAccount__icon",class:"m_lang_"+t.$t("lang")}),i("div",{staticClass:"settingsAccount__content"},[i("span",{staticClass:"settingsAccount__label"},[t._v(t._s(t.$t("settings.account.appearance.language.title")))])]),i("div",{staticClass:"settingsAccount___actions"},[i("Button",{ref:"lang",attrs:{type:"text",display:"inline",color:"secondary",label:t.$t("lang_display"),dropdown:t.lang_dropdown,loading:t.setting_lang},on:{click:function(e){t.lang_dropdown=!t.lang_dropdown}}})],1),i("Dropdown",{attrs:{show:t.lang_dropdown,anchor:t.$refs.lang},on:{close:function(e){t.lang_dropdown=!1}}},t._l(t.langs,(function(e){return i("div",{staticClass:"dropdown__item",on:{click:function(i){return t.setLang(e.lang)}}},[i("span",{staticClass:"dropdown__item_text"},[t._v(t._s(e.label))]),t.account.lang===e.lang?i("div",{staticClass:"dropdown__item_checked"},[i("Icon",{attrs:{name:"checked"}})],1):t._e()])})),0)],1)])]),i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.account.privacy.title")))]),i("div",{staticClass:"settings__field_button"},[i("Checkbox",{attrs:{checked:t.account.allow_inviting,label:t.$t("settings.account.privacy.allow_inviting"),name:"allow_inviting"},on:{input:function(e){return t.setAllowInviting(e)}}})],1)]),i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title m_danger"},[t._v(t._s(t.$t("settings.account.danger.title")))]),i("div",{staticClass:"settings__field_button"},[i("Button",{attrs:{color:"alarm",rounded:"",label:t.$t("settings.account.danger.delete"),loading:t.deleteing},on:{click:function(e){return t.deleteBlog(!1)}}})],1),i("div",{staticClass:"settings__field_text",domProps:{innerHTML:t._s(t.$t("settings.account.danger.delete_text",{blog:t.blogName}))}})])])]):t.blog?i("div",{staticClass:"settings__form"},[i("div",{staticClass:"settings__form_content"},[i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title m_danger"},[t._v(t._s(t.$t("settings.account.danger.title")))]),i("div",{staticClass:"settings__field_button"},["delete"===t.deleteAction?i("Button",{attrs:{color:"alarm",rounded:"",label:t.$t("settings.account.danger.delete"),loading:t.deleteing},on:{click:function(e){return t.deleteBlog(!1)}}}):i("Button",{attrs:{color:"alarm",rounded:"",label:t.$t("settings.account.danger.leave"),loading:t.deleteing},on:{click:function(e){return t.deleteBlog(!0)}}})],1),"delete"===t.deleteAction?i("div",{staticClass:"settings__field_text",domProps:{innerHTML:t._s(t.$t("settings.account.danger.delete_text",{blog:t.blogName}))}}):t._e()])])]):i("div",{staticClass:"settings__empty"},[i("Preloader")],1)}),[],!1,null,"09d01091",null));e.a=y.exports},925:function(t,e,i){"use strict";var s=i(27),n=i(4),o=i.n(n),r={components:{IconButton:s.a},props:["blogId","section","open"],computed:{account:function(){return this.$store.state.account},profile:function(){return this.$store.getters["account/profile"]},blog:function(){return this.blogId?o()(this.account.blogs,{id:this.blogId}):null}},methods:{toggle:function(){return this.$emit("toggle",!this.open)},close:function(){return this.$emit("close")}}},a=(i(889),i(0)),l=Object(a.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"settingsNav"},[t.blog?i("div",{staticClass:"settingsNav__item m_wrap",on:{click:t.toggle}},[i("div",{staticClass:"settingsNav__blog"},[t.blog.userpic?i("div",{staticClass:"settingsNav__blog_userpic",style:t._f("blogUserpicStyles")(t.blog)}):i("div",{staticClass:"settingsNav__blog_userpic m_letter",style:t._f("blogBgStyles")(t.blog)},[t._v(t._s(t._f("blogAbbr")(t.blog)))]),i("div",{staticClass:"settingsNav__blog_name"},[t._v(t._s(t.$t("settings.title")))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.section&&!t.open,expression:"section && !open"}],staticClass:"settingsNav__section"},[i("div",{staticClass:"settingsNav__topic_name"},[t._v(t._s(t.$t("settings.sections."+t.section)))])])]):t._e(),i("div",{staticClass:"settingsNav__split"}),i("div",{staticClass:"settingsNav__item"},[i("IconButton",{attrs:{icon:"close"},on:{click:t.close}})],1)])}),[],!1,null,"565adc94",null);e.a=l.exports},926:function(t,e,i){"use strict";var s=i(39),n=i(154),o=i(4),r=i.n(o),a={components:{Icon:s.a,Userpic:n.a},props:["blogId","section","sections"],data:function(){return{blogs_dropdown:!1}},computed:{links:function(){return this.$store.state.config.app.links},account:function(){return this.$store.state.account},profile:function(){return this.$store.getters["account/profile"]},blogs:function(){return this.account.blogs},currentBlog:function(){return this.blogId?r()(this.account.blogs,{id:this.blogId}):null}},watch:{currentBlog:function(){if(!this.currentBlog&&this.profile.id)return this.$emit("blog",this.profile.id)}},methods:{logout:function(){return this.$emit("logout"),this.trackEvent(["settings","sign_out"])},openNewBlog:function(){return this.$store.dispatch("blogs/settings/openNewBlog")},trackClick:function(t){return this.trackEvent(["settings","click_"+t])}}},l=(i(890),i(0)),c=Object(l.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"settingsAside"},[i("div",{staticClass:"settingsAside__group"},[t.currentBlog?i("div",{ref:"blogs_switcher",staticClass:"settingsAside__blog",class:{m_dropdown:t.account.blogs&&t.account.blogs.length>1||t.account.can_create_blog},on:{click:function(e){t.blogs_dropdown=!t.blogs_dropdown}}},[i("div",{staticClass:"settingsAside__blog_icon"},[i("Userpic",{attrs:{blog:t.currentBlog,full:""}})],1),i("div",{ref:"blogs_switcher_text",staticClass:"settingsAside__blog_content"},[i("span",{staticClass:"settingsAside__blog_text"},[t._v(t._s(t._f("blogName")(t.currentBlog)))]),t.account.blogs&&t.account.blogs.length>1||t.account.can_create_blog?i("div",{staticClass:"settingsAside__blog_dropdown",class:{m_open:t.blogs_dropdown}}):t._e()]),i("div",{staticClass:"settingsAside__blog_arrow",class:{m_open:t.blogs_dropdown}},[i("Icon",{attrs:{name:"arrow"}})],1),t.account.blogs&&t.account.blogs.length>1||t.account.can_create_blog?i("Dropdown",{attrs:{show:t.blogs_dropdown,anchor:t.$refs.blogs_switcher,width:"normal",mode:"user"},on:{close:function(e){t.blogs_dropdown=!1}}},[t._l(t.blogs,(function(e){return i("div",{directives:[{name:"show",rawName:"v-show",value:e.id!==t.currentBlog.id,expression:"blog.id !== currentBlog.id"}],key:e.id,staticClass:"dropdown__item",on:{click:function(i){return t.$emit("blog",e.id)}}},[i("div",{staticClass:"dropdown__item_userpic"},[i("Userpic",{attrs:{blog:e}})],1),i("div",{staticClass:"dropdown__item_blog"},[i("div",{staticClass:"dropdown__item_name"},[t._v(t._s(t._f("blogName")(e)))])])])})),t.account.can_create_blog?i("div",{staticClass:"dropdown__item",on:{click:t.openNewBlog}},[i("div",{staticClass:"dropdown__item_userpic"},[i("Icon",{attrs:{name:"add"}})],1),i("div",{staticClass:"dropdown__item_blog"},[i("div",{staticClass:"dropdown__item_name"},[t._v(t._s(t.$t("settings.new_blog")))])])]):t._e()],2):t._e()],1):t._e()]),i("div",{staticClass:"settingsAside__group"},t._l(t.sections,(function(e){return i("div",{key:e,staticClass:"settingsAside__section",class:{m_active:e===t.section},on:{click:function(i){return t.$emit("section",e)}}},[i("div",{staticClass:"settingsAside__section_icon"},[i("Icon",{attrs:{name:"settings_"+e}})],1),i("div",{staticClass:"settingsAside__section_text"},[t._v(t._s(t.$t("settings.sections."+e)))])])})),0),i("div",{staticClass:"settingsAside__group m_footer"},[i("a",{staticClass:"settingsAside__link",attrs:{href:"//t.me/TeletypeSupportBot",target:"_blank"},on:{click:function(e){return t.trackClick("support")}}},[t._v(t._s(t.$t("settings.links.support")))]),i("a",{staticClass:"settingsAside__link",attrs:{href:"mailto:mailbox@teletype.in"},on:{click:function(e){return t.trackClick("emailus")}}},[t._v(t._s(t.$t("settings.links.email")))]),i("a",{staticClass:"settingsAside__link",attrs:{href:t.links.tos,target:"_blank"},on:{click:function(e){return t.trackClick("terms")}}},[t._v(t._s(t.$t("settings.links.tos")))]),i("a",{staticClass:"settingsAside__link",attrs:{href:t.links.privacy,target:"_blank"},on:{click:function(e){return t.trackClick("policy")}}},[t._v(t._s(t.$t("settings.links.privacy")))]),t.profile.uri?i("button",{staticClass:"settingsAside__link",on:{click:t.logout}},[t._v(t._s(t.$t("settings.links.logout",t.profile)))]):t._e()])])}),[],!1,null,"57065a00",null);e.a=c.exports},927:function(t,e,i){"use strict";var s=i(18),n=i(153),o=i(58),r=i(162),a=i(894),l=i.n(a),c=i(29),u=i.n(c),d={name:"settings-domain",components:{Preloader:s.a,Button:o.a,Input:n.a,TipNote:r.a},props:["blog"],data:function(){return{savedDomain:null,domain:null,trackingId:{ga:null,ym:null},process:{domain:!1,ga:!1,ym:!1},error:null}},computed:{config:function(){return this.$store.state.config.app},fromDomain:function(){return this.$store.state.domain},currentDomain:function(){return!!this.savedDomain&&(this.savedDomain.domain?this.savedDomain.domain:this.blog.domain?this.blog.domain:null)},isOnCurrentDomain:function(){return this.fromDomain&&this.blog.domain===this.fromDomain},valid:function(){var t;return t=this.domain||this.currentDomain,{domain:this.isValidDomain(t)?t:null,ga:this.isValidGA(this.trackingId.ga)?this.trackingId.ga:null,ym:this.isValidYM(this.trackingId.ym)?this.trackingId.ym:null}},trackers:function(){return{ga:"googleanalytics",ym:"yandexmetrika"}}},filters:{toUnicode:function(t){return t?l.a.toUnicode(t):null}},watch:{blog:{handler:"reset"},domain:function(){var t;if((null!=(t=this.savedDomain)?t.domain:void 0)&&!this.blog.domain&&!this.domain)return this.resetDomain()}},mounted:function(){return this.fetchCurrentDomain()},methods:{fetchCurrentDomain:function(){var t;if(this.blog)return t=this.blog.id,this.$store.dispatch("blogs/settings/checkDomain",{id:t}).then(t=>this.savedDomain=t,()=>this.errorAlert())},reset:function(){return this.fetchCurrentDomain(),this.domain=null,this.trackingId=u()(this.trackingId,(function(t){return null})),this.process=u()(this.process,(function(t){return null})),this.error=null},toggleDomain:function(t){return t.preventDefault(),this.blog.domain?this.unmapDomain():this.valid.domain?this.mapDomain():void 0},mapDomain:function(){var t,e;if(this.valid.domain)return e=this.blog.id,t=this.valid.domain,this.process.domain=!0,this.$store.dispatch("blogs/settings/changeDomain",{id:e,domain:t}).then(t=>t.success?this.fetchCurrentDomain():this.error=this.$t("settings.domain.error_not_mapped")).catch(t=>(null!=t?t.error:void 0)&&this.i18n.t.settings.domain["error_"+t.error]?this.error=this.i18n.t.settings.domain["error_"+t.error]:this.error=this.$t("settings.domain.error")).then(()=>(this.blog.domain&&this.trackEvent(["settings","map_domain"]),this.process.domain=!1),()=>(this.errorAlert(),this.process.domain=!1))},resetDomain:function(){var t;return t=this.blog.id,null,this.$store.dispatch("blogs/settings/changeDomain",{id:t,domain:null}).catch((function(){}))},unmapDomain:function(){var t,e;if(this.currentDomain)return t=this.blog.id,null,this.process.domain=!0,e=this.isOnCurrentDomain,this.$store.dispatch("confirms/add",{message:this.$t("confirms.domain"),type:"danger"}).then(async()=>{try{await this.$store.dispatch("blogs/settings/changeDomain",{id:t,domain:null,skipUpdate:e})}catch(t){}return this.blog.domain||this.trackEvent(["settings","unmap_domain"]),this.isOnCurrentDomain?this.$ttrouter.push({name:"settingsSectionBlog",domain:null,params:{section:"domain",blog:t}}):this.fetchCurrentDomain()}).then(()=>this.process.domain=!1,()=>(this.errorAlert(),this.process.domain=!1))},toggleTracker:function(t){return this.valid[t]?this.setTracker(t):this.unsetTracker(t)},setTracker:function(t){var e,i;if(this.valid[t])return i=this.blog.id,e={[t+"_tracking_id"]:this.valid[t]},this.process[t]=!0,this.$store.dispatch("blogs/settings/edit",{id:i,fields:e}).then(()=>(this.trackEvent(["settings","add_"+this.trackers[t]]),this.trackingId[t]=null,this.process[t]=!1),()=>(this.errorAlert(),this.process[t]=!1))},unsetTracker:function(t){var e,i;if(this.blog[t+"_tracking_id"])return i=this.blog.id,e={[t+"_tracking_id"]:null},this.process[t]=!0,this.$store.dispatch("confirms/add",{message:this.$t("confirms."+t),type:"delete"}).then(()=>this.$store.dispatch("blogs/settings/edit",{id:i,fields:e}),(function(){})).then(()=>(this.trackEvent(["settings","remove_"+this.trackers[t]]),this.trackingId[t]=null,this.process[t]=!1),()=>(this.errorAlert(),this.process[t]=!1))},errorAlert:function(t){var e;return e=t&&this.i18n.t.settings.errors[t]?"settings.errors."+t:"settings.errors.other",this.$store.dispatch("alerts/add",{type:"error",locale:e})},isValidGA:function(t){return!!t&&(!!/^([a-z]{2,3})-(\d+)-(\d+)$/i.test(t)||!!/^G-([A-Z0-9]{8,12})$/.test(t))},isValidYM:function(t){return!!t&&/^(\d{4,15})$/.test(t)},isValidDomain:function(t){var e;return!!t&&(e=l.a.toASCII(t),!!/^([a-z0-9-]+\.)+[a-z0-9-]{2,}$/i.test(e)&&!/^([A-z0-9-]+\.){0,}teletype\.([a-z]{2,})$/.test(e))}}},h=i(0),p=Object(h.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.blog?i("div",{staticClass:"settings__form"},[i("div",{staticClass:"settings__form_content"},[i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings.domain.title")))]),i("form",{staticClass:"settings__field_input m_rows",on:{submit:t.toggleDomain}},[i("div",{staticClass:"settings__col m_main"},[i("Input",{attrs:{name:"domain",label:t.$t("settings.domain.placeholder"),value:t._f("toUnicode")(t.currentDomain),icon:t.blog.domain?t.blog.domain_https?"https":"http":null,max:100,readonly:!!t.blog.domain||!t.blog.admin,disabled:!1===t.currentDomain},on:{change:function(e){return t.domain=e}}})],1),i("div",{staticClass:"settings__col"},[t.blog.admin&&t.blog.domain?i("Button",{attrs:{rounded:"",action:"submit",label:t.$t("settings.domain.unmap"),loading:!!t.process.domain}}):t.blog.admin?i("Button",{attrs:{rounded:"",type:"filled",action:"submit",label:t.$t("settings.domain.map"),loading:!!t.process.domain,disabled:!t.valid.domain}}):t._e()],1)]),i("transition",{attrs:{mode:"out-in","leave-to-class":"m_hidden","enter-class":"m_hidden"}},[t.error?i("div",{key:"error",staticClass:"settings__field_error",domProps:{innerHTML:t._s(t.error)}}):!t.blog.domain&&t.savedDomain&&t.savedDomain.domain?i("div",{key:"not_mapped",staticClass:"settings__field_text",domProps:{innerHTML:t._s(t.$t("settings.domain.text.not_mapped"))}}):t.blog.domain?t._e():i("div",{key:"no_domain",staticClass:"settings__field_text",domProps:{innerHTML:t._s(t.$t("settings.domain.text.no_domain"))}})])],1),t.blog.domain?t._e():i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__tipnote"},[i("TipNote",{attrs:{icon:"lock",text:t.$t("settings.ga.not_accepted")}})],1)]),t._l(t.trackers,(function(e,s){return i("div",{key:s,staticClass:"settings__field",class:{m_disabled:!t.blog.domain}},[i("div",{staticClass:"settings__field_title"},[t._v(t._s(t.$t("settings."+s+".title")))]),i("form",{staticClass:"settings__field_input m_rows",on:{submit:function(e){return e.preventDefault(),t.toggleTracker(s)}}},[i("div",{staticClass:"settings__col m_main"},[i("Input",{attrs:{name:"domain",label:t.$t("settings."+s+".placeholder"),value:t.blog[s+"_tracking_id"],max:15,disabled:!t.blog.domain,readonly:!!t.blog[s+"_tracking_id"]||!t.blog.admin},on:{change:function(e){return t.trackingId[s]=e}}})],1),i("div",{staticClass:"settings__col"},[t.blog[s+"_tracking_id"]&&t.blog.admin?i("Button",{attrs:{rounded:"",label:t.$t("settings."+s+".remove"),loading:t.process[s],disabled:!t.blog.domain},on:{click:function(e){return e.preventDefault(),t.unsetTracker(s)}}}):t.blog.admin?i("Button",{attrs:{rounded:"",type:"filled",label:t.$t("settings."+s+".add"),loading:t.process[s],disabled:!t.blog.domain||!t.valid[s]},on:{click:function(e){return e.preventDefault(),t.setTracker(s)}}}):t._e()],1)])])}))],2)]):i("div",{staticClass:"settings__empty"},[i("Preloader")],1)}),[],!1,null,null,null);e.a=p.exports},928:function(t,e,i){"use strict";var s=i(581),n=i(701),o=i(58),r=i(18),a={name:"settings-topics",components:{SuggestedInput:s.a,SettingsTopic:n.a,Button:o.a,Preloader:r.a},props:["blog"],data:function(){return{render:!1,editing_topic:null,adding_topic:null,enter_topic:null,deleteing_topic:null,new_topic_name:null}},computed:{config:function(){return this.$store.state.config.app},topics:function(){var t;return(null!=(t=this.blog)?t.topics:void 0)||[]}},methods:{setNewTopicName:function(t,e=!1){return this.new_topic_name===t?this.addTopic():this.new_topic_name=t},toggleEditing:function(t,e){return this.editing_topic=e?t:null},addTopic:function(){var t,e;if(e=this.new_topic_name.trim())return this.adding_topic=e,t=this.blog.id,this.$store.dispatch("blogs/settings/addTopic",{blog_id:t,name:e}).then(()=>(this.adding_topic=null,this.enter_topic=null,this.new_topic_name=null),()=>(this.$store.dispatch("alerts/add",{type:"error",locale:"settings.errors.other"}),this.adding_topic=null,this.enter_topic=null))}},mounted:function(){return this.render=!0}},l=i(0),c=Object(l.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.blog?i("div",{staticClass:"settings__form"},[i("div",{staticClass:"settings__form_content"},[t.topics.length<t.config.max_users_topics?i("div",{staticClass:"settings__field"},[i("div",{staticClass:"settings__field_input m_rows"},[i("div",{staticClass:"settings__col m_main"},[i("SuggestedInput",{attrs:{name:"suggest_topics",type:"topic",action:"blogs/settings/suggestTopics",getter:"blogs/settings/suggestedTopics",placeholder:t.$t("settings.topics.placeholder"),value:t.adding_topic,queryValue:t.new_topic_name,queryParams:{blog_id:t.blog.id,limit:5},changesMode:"enter"},on:{input:function(e){return t.setNewTopicName(e)},enter:function(e){return t.setNewTopicName(e,!0)}}})],1),i("div",{staticClass:"settings__col"},[i("Button",{attrs:{rounded:"",type:"filled",label:t.$t("settings.topics.add"),loading:!!t.adding_topic,disabled:!t.new_topic_name},on:{click:t.addTopic}})],1)]),0===t.topics.length?i("div",{staticClass:"settings__field_text"},[t._v(t._s(t.$t("settings.topics.empty")))]):t._e()]):t._e(),t.topics.length>0?i("div",{staticClass:"settings__field m_list"},[i("div",{staticClass:"settings__field_title m_list"},[t._v(t._s(t.topics.length)+" "+t._s(t.$t("settings.topics.list",t.topics.length)))]),i("transition-group",{staticClass:"settings__list",attrs:{tag:"div",appear:t.render,"leave-to-class":"m_hidden","enter-class":"m_hidden","appear-class":"m_hidden"}},t._l(t.topics,(function(e){return i("SettingsTopic",{key:e.id,staticClass:"settings__list_item",attrs:{topic:e,blog:t.blog,editing:t.editing_topic===e.id},on:{editing:function(i){return t.toggleEditing(e.id,i)}}})})),1)],1):t._e()])]):i("div",{staticClass:"settings__empty"},[i("Preloader")],1)}),[],!1,null,null,null);e.a=c.exports},939:function(t,e,i){"use strict";i.r(e);var s,n=i(18),o=i(39),r=i(155),a=i(40),l=i(885),c=i.n(l),u=i(886),d=i.n(u),h=i(1),p=i(19),_=i.n(p),m=(i(81),i(548),{components:{Link:a.a,icon_image:c.a,icon_video:d.a},props:["link","read","date","image","text","textLine","textIcon","systemText","title","subtitle","authorUserpic","authorColor","authorVerified","authorName"],computed:{type:function(){return this.link?"Link":"div"},dateString:function(){return this.date?_()(this.date).ttDate(this.$timer.moment,this.i18n.t.popups.notifications.date):null}},filters:{shortenedText:function(t){return Object(h.s)(t,120)}}}),g=(i(887),i(0)),f=Object(g.a)(m,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(t.type,{tag:"component",staticClass:"notification",class:{m_read:t.read,m_clickable:!!t.link},attrs:{to:t.link}},[i("div",{staticClass:"notification__header"},[t.authorUserpic?i("span",{staticClass:"notification__header_userpic",style:t.authorUserpic}):!1===t.authorColor?i("span",{staticClass:"notification__header_userpic",class:["m_dummy"]}):t.authorColor?i("span",{staticClass:"notification__header_userpic",style:t.authorColor}):t._e(),i("span",{staticClass:"notification__header_name"},[t._v(t._s(t.authorName))]),t.dateString?i("span",{staticClass:"notification__header_date",domProps:{innerHTML:t._s(t.dateString)}}):t._e()]),i("div",{staticClass:"notification__content"},[t.image?i("img",{staticClass:"notification__content_image",attrs:{src:t.image}}):t.systemText?i("div",{staticClass:"notification__content_text m_system",domProps:{innerHTML:t._s(t.systemText)}}):t._e(),t.text||t.$slots.default?i("div",{staticClass:"notification__content_text",class:{m_line:t.textLine}},[t._t("default",(function(){return[t.textIcon?i("icon_"+t.textIcon,{tag:"component",staticClass:"notification__content_icon"}):t._e(),t.text?i("span",{domProps:{innerHTML:t._s(t.text)}}):t._e()]}))],2):t._e()]),t.title?i("div",{staticClass:"notification__ref"},[i("div",{staticClass:"notification__ref_text"},[t._v(t._s(t._f("shortenedText")(t.title)))])]):t.subtitle?i("div",{staticClass:"notification__ref m_line"},[i("div",{staticClass:"notification__ref_text"},[t._v(t._s(t.subtitle))])]):t._e()])}),[],!1,null,"6d981475",null).exports,v={components:{Notification:f},props:["id","created","read","payload"],computed:{user:function(){return this.payload.blog},link:function(){return this.user?{name:"blog",blog:this.user,params:{uri:this.user.uri}}:null},authorName:function(){var t,e,i,s;return(null!=(t=this.user)?t.name:void 0)?null!=(e=this.user)?e.name:void 0:(null!=(i=this.user)?i.uri:void 0)?"@"+(null!=(s=this.user)?s.uri:void 0):this.$t("popups.notifications.deleted_user")},authorUserpic:function(){var t,e,i;return i=null,(null!=(t=this.user)?t.userpic:void 0)&&(i=null!=(e=this.user)?e.userpic:void 0),i?{"background-image":`url('${i}')`}:null},authorColor:function(){var t,e;return!!(t=(null!=(e=this.user)?e.id:void 0)||0)&&{"background-color":Object(h.v)(t)}},authorVerified:function(){var t;return null!=(t=this.user)?t.verified:void 0}}},b=Object(g.a)(v,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("Notification",{attrs:{date:t.created,read:t.read,link:t.link,"system-text":t.$t("popups.notifications.blog_teammate"),"author-name":t.authorName,"author-userpic":t.authorUserpic,"author-color":t.authorColor,"author-verified":t.authorVerified}})}),[],!1,null,null,null).exports,C={components:{Notification:f},props:["id","created","read","payload"],computed:{user:function(){return this.payload.user},blog:function(){return this.payload.blog},link:function(){return this.user?{name:"blog",blog:this.user,params:{uri:this.user.uri}}:null},authorName:function(){var t,e,i,s;return(null!=(t=this.user)?t.name:void 0)?null!=(e=this.user)?e.name:void 0:(null!=(i=this.user)?i.uri:void 0)?"@"+(null!=(s=this.user)?s.uri:void 0):this.$t("popups.notifications.deleted_user")},authorUserpic:function(){var t,e,i;return i=null,(null!=(t=this.user)?t.userpic:void 0)&&(i=null!=(e=this.user)?e.userpic:void 0),i?{"background-image":`url('${i}')`}:null},authorColor:function(){var t,e;return!!(t=(null!=(e=this.user)?e.id:void 0)||0)&&{"background-color":Object(h.v)(t)}},authorVerified:function(){var t;return null!=(t=this.user)?t.verified:void 0},blogName:function(){var t,e,i,s;return(null!=(t=this.blog)?t.name:void 0)?null!=(e=this.blog)?e.name:void 0:(null!=(i=this.blog)?i.uri:void 0)?"@"+(null!=(s=this.blog)?s.uri:void 0):this.$t("popups.notifications.blog_subscription.you")}}},k=Object(g.a)(C,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("Notification",{attrs:{date:t.created,read:t.read,link:t.link,"system-text":t.$t("popups.notifications.blog_subscription.text",{blogName:t.blogName}),"author-name":t.authorName,"author-userpic":t.authorUserpic,"author-color":t.authorColor,"author-verified":t.authorVerified}})}),[],!1,null,null,null).exports,w=i(159),$=i.n(w),y={components:{Notification:f},props:["id","created","read","payload"],computed:{serviceAd:function(){return this.payload.service_ad||{}},link:function(){return $()(this.serviceAd,`locales.${this.i18n.l}.link`)||$()(this.serviceAd,`locales.${this.i18n.d.lang}.link`)||null},title:function(){return $()(this.serviceAd,`locales.${this.i18n.l}.title`)||$()(this.serviceAd,`locales.${this.i18n.d.lang}.title`)||this.$t("popups.service_ads.categories."+this.serviceAd.category)},text:function(){return $()(this.serviceAd,`locales.${this.i18n.l}.text`)||$()(this.serviceAd,`locales.${this.i18n.d.lang}.text`)||null},image:function(){return $()(this.serviceAd,`locales.${this.i18n.l}.image`)||$()(this.serviceAd,`locales.${this.i18n.d.lang}.image`)||null}}},x=Object(g.a)(y,(function(){var t=this.$createElement;return(this._self._c||t)("Notification",{attrs:{date:this.created,read:this.read,link:this.link,text:this.text,image:this.image,"author-name":this.title,"author-color":null}})}),[],!1,null,null,null).exports,I={components:{Notification:f},props:["id","created","read","payload"],computed:{message:function(){return this.payload.message||{}},link:function(){return this.message.link},text:function(){return this.message["text_"+this.i18n.l]?this.message["text_"+this.i18n.l]:this.message["text_"+this.i18n.d]?this.message["text_"+this.i18n.d]:this.message.text?this.message.text:this.message.message?this.message.message:this.$t("popups.notifications.deleted_message")},image:function(){return this.message.image},authorName:function(){var t,e,i,s;return this.message.author_name?this.message.author_name:(null!=(t=this.message.author)?t.name:void 0)?null!=(e=this.message.author)?e.name:void 0:(null!=(i=this.message.author)?i.uri:void 0)?"@"+(null!=(s=this.message.author)?s.uri:void 0):this.$t("popups.notifications.unknown_user")},authorUserpic:function(){var t,e,i;return i=null,this.message.author_userpic&&(i=this.message.author_userpic),(null!=(t=this.message.author)?t.userpic:void 0)&&(i=null!=(e=this.message.author)?e.userpic:void 0),i?{"background-image":`url('${i}')`}:null},authorColor:function(){var t;return!!(t=this.message.user_blog||0)&&{"background-color":Object(h.v)(t)}},authorVerified:function(){return!0}}},P=Object(g.a)(I,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("Notification",{attrs:{date:t.created,read:t.read,link:t.link,text:t.text,image:t.image,"author-name":t.authorName,"author-userpic":t.authorUserpic,"author-color":t.authorColor,"author-verified":t.authorVerified}})}),[],!1,null,null,null).exports,T={extends:P},B=Object(g.a)(T,void 0,void 0,!1,null,null,null).exports,A=i(234),M=i(2),j=i.n(M);s=function(t){var e,i,s;return e=Object(A.a)(t),t=[],i=null,(s=function(e){var n;return i||"youtube"!==(n=e.name)&&"vimeo"!==n&&"video"!==n?i||"image"!==e.name?"text"===e.type?t.push(e.value):j()(e.children,s):i="image":i="video"})(e),{text:t.join(" ").trim(),media:i}};var E={components:{Notification:f},props:["id","created","read","payload"],computed:{comment:function(){return this.payload.comment},article:function(){return this.payload.article},author:function(){var t;return null!=(t=this.comment)?t.author:void 0},link:function(){return this.comment&&this.article&&this.article.author?{name:"article",blog:this.article.author,params:{uri:this.article.author.uri,article_uri:this.article.uri},hash:"#c_"+this.comment.comment_id}:null},content:function(){var t,e,i;if(null!=(e=this.comment)?e.text:void 0){if(({text:i,media:t}=s(this.comment.text)),i)return{text:i,media:t};switch(t){case"image":i=this.$t("popups.notifications.comment.image");break;case"video":i=this.$t("popups.notifications.comment.video");break;default:i=this.$t("popups.notifications.comment.media"),t="video"}return{text:i,media:t}}return{text:this.$t("popups.notifications.deleted_comment"),media:null}},subtitle:function(){var t,e;return(null!=(t=this.article)?t.sharing_title:void 0)?this.article.sharing_title:(null!=(e=this.article)?e.title:void 0)?this.article.title:null},authorName:function(){var t,e,i,s;return(null!=(t=this.author)?t.name:void 0)?null!=(e=this.author)?e.name:void 0:(null!=(i=this.author)?i.uri:void 0)?"@"+(null!=(s=this.author)?s.uri:void 0):this.comment?this.$t("popups.notifications.deleted_user"):this.$t("popups.notifications.unknown_user")},authorUserpic:function(){var t,e,i;return i=null,(null!=(t=this.author)?t.userpic:void 0)&&(i=null!=(e=this.author)?e.userpic:void 0),i?{"background-image":`url('${i}')`}:null},authorColor:function(){var t,e;return!!(t=(null!=(e=this.author)?e.id:void 0)||0)&&{"background-color":Object(h.v)(t)}},authorVerified:function(){var t;return(null!=(t=this.author)?t.verified:void 0)||!1}},filters:{shortenedText:function(t){return Object(h.s)(t,120)}}},D=Object(g.a)(E,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("Notification",{attrs:{date:t.created,read:t.read,link:t.link,text:t._f("shortenedText")(t.content.text),"text-icon":t.content.media,subtitle:t.subtitle,"author-name":t.authorName,"author-userpic":t.authorUserpic,"author-color":t.authorColor,"author-verified":t.authorVerified}})}),[],!1,null,null,null).exports,N={extends:D},S=Object(g.a)(N,void 0,void 0,!1,null,null,null).exports,L={extends:D,computed:{author:function(){return this.payload.user}}},O=Object(g.a)(L,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("Notification",{attrs:{date:t.created,read:t.read,link:t.link,"system-text":t.$t("popups.notifications.comment_like.text"),text:t._f("shortenedText")(t.content.text),"text-line":!0,"text-icon":t.content.media,"author-name":t.authorName,"author-userpic":t.authorUserpic,"author-color":t.authorColor,"author-verified":t.authorVerified}})}),[],!1,null,null,null).exports,V={components:{Notification:f},props:["id","created","read","payload"],computed:{article:function(){return this.payload.article},author:function(){var t;return null!=(t=this.article)?t.author:void 0},link:function(){var t,e,i;return t=this.article,e=(null!=(i=this.article)?i.author:void 0)||this.author,t&&e?{name:"article",blog:e,params:{uri:e.uri,article_uri:t.uri}}:null},title:function(){var t,e;return(null!=(t=this.article)?t.sharing_title:void 0)?this.article.sharing_title:(null!=(e=this.article)?e.title:void 0)?this.article.title:this.$t("popups.notifications.deleted_article")},image:function(){return this.article&&this.article.sharing_image?"image"!==this.article.sharing_type?null:this.article.sharing_image:null},authorName:function(){var t,e,i;return(null!=(t=this.author)?t.name:void 0)?this.author.name:(null!=(e=this.author)?e.uri:void 0)?"@"+(null!=(i=this.author)?i.uri:void 0):this.article?this.$t("popups.notifications.deleted_user"):this.$t("popups.notifications.unknown_user")},authorUserpic:function(){var t,e,i;return i=null,(null!=(t=this.author)?t.userpic:void 0)&&(i=null!=(e=this.author)?e.userpic:void 0),i?{"background-image":`url('${i}')`}:null},authorColor:function(){var t,e;return!!(t=(null!=(e=this.author)?e.id:void 0)||0)&&{"background-color":Object(h.v)(t)}},authorVerified:function(){var t;return(null!=(t=this.author)?t.verified:void 0)||!1}}},U=Object(g.a)(V,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("Notification",{attrs:{date:t.created,read:t.read,link:t.link,image:t.image,title:t.title,"author-name":t.authorName,"author-userpic":t.authorUserpic,"author-color":t.authorColor,"author-verified":t.authorVerified}})}),[],!1,null,null,null).exports,q={extends:U,computed:{author:function(){return this.payload.user},reaction:function(){return this.payload.reaction}}},F=Object(g.a)(q,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("Notification",{attrs:{date:t.created,read:t.read,link:t.link,"system-text":t.$t("popups.notifications.article_reaction.text",{reaction:t.reaction}),subtitle:t.title,"author-name":t.authorName,"author-userpic":t.authorUserpic,"author-color":t.authorColor,"author-verified":t.authorVerified}})}),[],!1,null,null,null).exports,z=i(32),R=i.n(z),H=i(37),Z=i.n(H),W=i(24),Y=i.n(W),K=[].splice,G={components:{Preloader:n.a,Icon:o.a,Tab:r.a,BlogTeammateView:b,BlogSubscriptionView:k,ServiceAdView:x,ServiceMessageView:P,PersonalMessageView:B,CommentReplyView:S,CommentLikeView:O,ArticleCommentView:D,ArticleReactionView:F,ArticleView:U},props:["show"],data:function(){return{loading:!0,loadingMore:!1,isFull:!1,section:null,unreadSaved:{}}},computed:{account:function(){return this.$store.state.account},sections:function(){return Z()(this.$store.getters["notifications/sections"],"articles")},list:function(){return this.$store.getters["notifications/list"]},unread:function(){return this.$store.getters["notifications/unreadSections"]},activity:function(){return this.$store.getters["notifications/activity"]},forYou:function(){return this.$store.getters["notifications/forYou"]},notificationsViews:function(){return{blog_teammate:"BlogTeammateView",blog_subscription:"BlogSubscriptionView",service_ad:"ServiceAdView",service_message:"ServiceMessageView",personal_message:"PersonalMessageView",comment_reply:"CommentReplyView",comment_like:"CommentLikeView",article_comment:"ArticleCommentView",article_reaction:"ArticleReactionView",article:"ArticleView"}}},watch:{show:{handler:function(){if(this.show)return this.unreadSaved=this.unread,this.fetch()}},section:{immediate:!0,handler:function(){return this.section||(this.section=R()(this.sections)),this.isFull=!1,this.read()}}},mounted:function(){return this.unbindRouterHook=this.$router.beforeEach((...t)=>{var e,i;return i=t,[...t]=i,[e]=K.call(t,-1),this.close(),e()})},beforeDestroy:function(){return"function"==typeof this.unbindRouterHook?this.unbindRouterHook():void 0},methods:{fetch:function(){if(this.show)return this.isFull=!1,this.loading=!0,this.$store.dispatch("notifications/load").then(()=>(this.loading=!1,this.read()),()=>this.loading=!1)},loadMore:function(){if(!this.loading&&!this.loadingMore)return this.loadingMore=!0,this.$store.dispatch("notifications/loadMore",{section:this.section}).then(({notifications:t})=>(Y()(t)&&(this.isFull=!0),this.loadingMore=!1),()=>this.loadingMore=!1)},read:function(){if(this.show&&this.section&&!this.loading)return this.$store.dispatch("notifications/read",this.section)},onAutoloadTrigger:function(t){if(t)return this.loadMore()},close:function(){if(this.show)return this.$store.commit("notifications/setOpen",!1)}}},J=(i(888),Object(g.a)(G,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{show:t.show,menu:!0,backdrop:"dark",width:"form",height:"full","position-vertical":"top","position-horizontal":"right"},on:{close:t.close}},[i("div",{staticClass:"notifications"},[i("div",{staticClass:"notifications__sections"},t._l(t.sections,(function(e){return i("Tab",{key:e,attrs:{icon:e,active:t.section===e,simple:!0},on:{click:function(i){t.section=e}}},[i("span",[t._v(t._s(t.$t("popups.notifications."+e)))]),t.unreadSaved[e]>0?i("span",[t._v(" ("+t._s(t.unreadSaved[e])+")")]):t._e()])})),1),t.loading?t.loading?i("div",{staticClass:"notifications__empty"},[i("Preloader",{attrs:{inline:!0}})],1):i("div",{staticClass:"notifications__empty"},[t._v(t._s(t.$t("popups.notifications.empty")))]):i("div",{ref:"content",staticClass:"notifications__content"},t._l(t.list,(function(e,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:s===t.section,expression:"name === section"}],key:s,ref:s,refInFor:!0,staticClass:"notifications__list"},[e.length>0?i("transition-group",{staticClass:"notifications__list_items",attrs:{tag:"div","enter-class":"m_hidden"}},[t._l(e,(function(e){return i(t.notificationsViews[e.type],{key:e.notification_id,tag:"component",attrs:{id:e.notification_id,created:e.created_at,read:e.read,payload:e.payload}})})),t.isFull||t.loadingMore?t.loadingMore?i("div",{key:"_loading_",staticClass:"notifications__list_more"},[i("Preloader")],1):t._e():i("div",{directives:[{name:"viewport",rawName:"v-viewport.exact",value:{callback:t.onAutoloadTrigger,root:t.$refs.content},expression:"{callback: onAutoloadTrigger, root: $refs.content}",modifiers:{exact:!0}}],key:"_load_trigger_",staticClass:"notifications__list_more"})],2):i("div",{staticClass:"notifications__empty"},[t._v(t._s(t.$t("popups.notifications.empty")))])],1)})),0)])])}),[],!1,null,"1b2eaef3",null));e.default=J.exports},942:function(t,e,i){"use strict";i.r(e);var s=i(33),n=i.n(s),o={props:["id","type","onClick","text","locale","show","showTime","view","resolve","promise","to"],methods:{click:function(){if(this.onClick)return"close"===this.onClick?this.$store.dispatch("alerts/resolve",this.id):n()(this.onClick)?this.onClick():void 0},over:function(){return this.$store.dispatch("alerts/stopTimeout",this.id)},leave:function(){return this.$store.dispatch("alerts/setTimeout",this.id)}},mounted:function(){return this.$store.dispatch("alerts/setTimeout",this.id)}},r=(i(911),i(0)),a={components:{Default:Object(r.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"alert",class:["m_"+t.type,!!t.onClick&&"m_clickable"],on:{click:t.click,mouseover:t.over,mouseleave:t.leave}},[t._t("default",(function(){return[t.locale?i("div",{staticClass:"alert__text",domProps:{innerHTML:t._s(t.$t(t.locale||"title"))}}):i("div",{staticClass:"alert__text",domProps:{innerHTML:t._s(t.text)}})]}))],2)}),[],!1,null,"4c047dfe",null).exports},computed:{alerts:function(){return this.$store.getters["alerts/queue"]||[]}},filters:{alertComponent:function(t){return t||"Default"}}},l=(i(912),Object(r.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"alerts js_scroll_fix"},[i("transition-group",{staticClass:"alerts__content",attrs:{tag:"div","leave-to-class":"m_hidden m_exit","enter-class":"m_hidden"}},t._l(t.alerts,(function(e){return i(t._f("alertComponent")(e.view),t._b({key:e.id,tag:"component"},"component",e,!1))})),1)],1)}),[],!1,null,"764de7be",null));e.default=l.exports},946:function(t,e,i){"use strict";i.r(e);var s=[].splice,n={props:["show"],computed:{account:function(){return this.$store.state.account},blogs:function(){return this.account.blogs}},mounted:function(){return this.unbindRouterHook=this.$router.beforeEach((...t)=>{var e,i;return i=t,[...t]=i,[e]=s.call(t,-1),this.close(),e()})},beforeDestroy:function(){return"function"==typeof this.unbindRouterHook?this.unbindRouterHook():void 0},methods:{clickBlog:function(t){return this.trackEvent([this.$ttrouter.pageName(),"switch_blog",t]),this.close()},clickFeed:function(){return this.trackEvent([this.$ttrouter.pageName(),"open_feed","account_popup"]),this.close()},clickSettings:function(){var t,e,i;return i=this.$route.params.uri,(t=find(this.blogs,{uri:i}))||(e=this.$store.state.domain,t=find(this.account.blogs,{domain:e})),t||(t=find(this.account.blogs,{personal:!0})),this.$store.dispatch("blogs/settings/openSettings",{blog_id:t?t.id:null}),this.trackEvent([this.$ttrouter.pageName(),"open_settings","account_popup"]),this.close()},clickNewBlog:function(){return this.$store.dispatch("blogs/settings/openNewBlog",!0),this.trackEvent([this.$ttrouter.pageName(),"open_new_blog","account_popup"]),this.close()},close:function(){if(this.show)return this.$store.commit("account/setPopupOpen",!1)}}},o=(i(884),i(0)),r=Object(o.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{show:t.show,menu:!0,backdrop:"dark",width:"narrow",height:"full","position-vertical":"top","position-horizontal":"right"},on:{close:t.close}},[i("div",{staticClass:"accountPopup"},[i("div",{staticClass:"accountPopup__list"},[i("div",{key:"settings",staticClass:"accountPopup__action",on:{click:t.clickSettings}},[i("div",{staticClass:"accountPopup__action_name"},[t._v(t._s(t.$t("popups.account.settings")))]),i("div",{staticClass:"accountPopup__action_icon"},[i("Icon",{attrs:{name:"settings"}})],1)]),t.account.can_create_blog?i("div",{key:"new_blog",staticClass:"accountPopup__action",on:{click:t.clickNewBlog}},[i("div",{staticClass:"accountPopup__action_name"},[t._v(t._s(t.$t("popups.account.new_blog")))]),i("div",{staticClass:"accountPopup__action_icon"},[i("Icon",{attrs:{name:"add"}})],1)]):t._e(),t._l(t.blogs,(function(e){return i("Link",{key:e.id,staticClass:"accountPopup__blog",attrs:{to:{name:"blog",blog:e,params:{uri:e.uri}}},on:{click:function(i){return t.clickBlog(e.uri)}}},[i("div",{staticClass:"accountPopup__blog_name"},[t._v(t._s(t._f("blogName")(e)))]),i("div",{staticClass:"accountPopup__blog_icon"},[e.userpic?i("div",{staticClass:"accountPopup__blog_userpic",style:t._f("blogUserpicStyles")(e)}):i("div",{staticClass:"accountPopup__blog_userpic m_letter",style:t._f("blogBgStyles")(e)},[t._v(t._s(t._f("blogAbbr")(e)))])])])}))],2)])])}),[],!1,null,"7137999a",null);e.default=r.exports},947:function(t,e,i){"use strict";i.r(e);var s={components:{Login:i(617).a},computed:{promise:function(){return this.$store.state.auth.popup||null},show:function(){return!!this.$store.getters["auth/popup"]}},methods:{close:function(){var t;return null!=(t=this.promise)?t.reject():void 0}}},n=(i(909),i(0)),o=Object(n.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("Popup",{attrs:{show:this.show,width:"form",close:!1},on:{close:this.close}},[e("Login",{attrs:{name:"login_popup",type:"login",simple:""},on:{close:this.close}})],1)}),[],!1,null,"15f299cc",null);e.default=o.exports},948:function(t,e,i){"use strict";i.r(e);var s=i(86),n=i(27),o=i(40),r=i(58),a=i(159),l=i.n(a),c=i(6),u=i.n(c),d=i(32),h=i.n(d),p=i(2),_=i.n(p),m=i(19),g=i.n(m),f=(i(81),{components:{Modal:s.a,IconButton:n.a,Link:o.a,Button:r.a},data:function(){return{touch:{state:!1,delta:0},scrolled:!1}},computed:{items:function(){return this.$store.getters["service_ads/items"]},length:function(){return this.items.length},show:function(){return this.length>0},ads:function(){return u()(this.items,t=>{var e,i,s;return e=this.i18n.l,s=this.i18n.d.lang,i={title:null,text:null,link:null,button:null,date:null},_()(i,(function(n,o){if(i[o]=l()(t,`locales.${e}.${o}`),!i[o])return i[o]=l()(t,`locales.${s}.${o}`)})),l()(t,`locales.${e}.image`)?(i.image=l()(t,`locales.${e}.image`),i.image_width=l()(t,`locales.${e}.image_width`),i.image_height=l()(t,`locales.${e}.image_height`)):l()(t,`locales.${s}.image`)&&(i.image=l()(t,`locales.${s}.image`),i.image_width=l()(t,`locales.${s}.image_width`),i.image_height=l()(t,`locales.${s}.image_height`)),(t.published_at||t.created_at)&&(i.date=g()(t.published_at||t.created_at).locale(e).format("LL")),i})}},watch:{show:{handler:function(){if(this.show)return this.read()},immediate:!0}},methods:{read:function(){var t,e;if(t=null!=(e=h()(this.items))?e.id:void 0)return this.$store.dispatch("service_ads/readAll",t)},close:function(){return this.$store.commit("service_ads/clear")},onScroll:function(){var t;return this.scrolled=(null!=(t=this.$refs.container)?t.scrollTop:void 0)>0},onTouch:function(t){return this.touch.state="end"!==t},onTouchMove:function(t){return this.touch.delta=t}}}),v=(i(913),i(0)),b=Object(v.a)(f,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{show:t.show,backdrop:"dark",width:"wide",fullscreen:"mobile","position-mobile":"bottom",height:"scroll"},on:{close:t.close}},[t.show?i("div",{staticClass:"serviceAds",class:{m_scrolled:t.scrolled,m_touching:t.touch.state},style:{"margin-top":t.touch.state?65+t.touch.delta+"px":null}},[i("div",{directives:[{name:"touch",rawName:"v-touch:swipe.down",value:t.close,expression:"close",arg:"swipe",modifiers:{down:!0}},{name:"touch",rawName:"v-touch:move.down",value:t.onTouchMove,expression:"onTouchMove",arg:"move",modifiers:{down:!0}},{name:"touch",rawName:"v-touch",value:t.onTouch,expression:"onTouch"}],staticClass:"serviceAds__header"},[i("div",{staticClass:"serviceAds__header_title",class:{m_hidden:t.scrolled}},[t._v(t._s(t.$t("popups.service_ads.title")))]),i("div",{staticClass:"serviceAds__header_scrolltitle",class:{m_hidden:!t.scrolled}},[t._v(t._s(t.$t("popups.service_ads.title")))])]),i("div",{ref:"container",staticClass:"serviceAds__container",on:{"&scroll":function(e){return t.onScroll.apply(null,arguments)}}},t._l(t.ads,(function(e){return i("div",{key:e.id,staticClass:"serviceAds__item"},[i("div",{staticClass:"serviceAds__content"},[e.date?i("div",{staticClass:"serviceAds__content_date"},[t._v(t._s(e.date))]):t._e(),i("div",{staticClass:"serviceAds__content_title"},[t._v(t._s(e.title))]),e.text?i("div",{staticClass:"serviceAds__content_text text",domProps:{innerHTML:t._s(e.text)}}):t._e(),i("div",{staticClass:"serviceAds__action"},[e.link?i("Button",{attrs:{type:"filled",rounded:"",link:e.link,newTab:!0,label:e.button||t.$t("popups.service_ads.button")}}):i("Button",{attrs:{type:"filled",rounded:"",label:e.button||t.$t("popups.service_ads.close")},on:{click:t.close}})],1)]),e.image&&e.link?i("Link",{staticClass:"serviceAds__art",attrs:{to:e.link,newTab:!0}},[i("img",{staticClass:"serviceAds__art_image",attrs:{src:e.image,width:e.image_width,height:e.image_height}})]):e.image?i("div",{staticClass:"serviceAds__art"},[i("img",{staticClass:"serviceAds__art_image",attrs:{src:e.image,width:e.image_width,height:e.image_height}})]):t._e()],1)})),0)]):t._e()])}),[],!1,null,"3e8f7d28",null);e.default=b.exports},949:function(t,e,i){"use strict";i.r(e);var s=i(167),n=i(58),o={components:{Popup:s.a,Button:n.a},data:function(){return{show:!1,eventsHandled:!1}},computed:{confirmation:function(){return this.$store.getters["confirms/current"]},showConfirmation:function(){return!!this.confirmation},buttonColor:function(){var t;switch(null!=(t=this.confirmation)?t.type:void 0){case"delete":case"danger":case"remove":case"leave":case"unfollow":return"alarm";case"accept":return"success";default:return null}},buttonText:function(){var t,e;return(null!=(t=this.confirmation)?t.button_text:void 0)?this.confirmation.button_text:(e=function(){var t;switch(null!=(t=this.confirmation)?t.type:void 0){case"delete":return"delete";case"unfollow":return"unfollow";case"leave":return"leave";default:return"accept"}}.call(this),this.$t("confirms.buttons."+e))}},watch:{showConfirmation:{immediate:!0,handler:function(){return this.show=this.showConfirmation}}},methods:{confirm:function(){if(this.confirmation)return this.$store.dispatch("confirms/confirm",this.confirmation.id).then(()=>this.show=!1)},dismiss:function(){if(this.confirmation)return this.$store.dispatch("confirms/dismiss",this.confirmation.id).then(()=>this.show=!1)},handleEnter:function(t){if(this.show&&13===t.keyCode)return t.preventDefault(),t.stopPropagation(),this.confirm()},onShowChange:function(t){if(t){if(this.eventsHandled)return;return document.addEventListener("keydown",this.handleEnter),this.eventsHandled=!0}return document.removeEventListener("keydown",this.handleEnter),this.eventsHandled=!1,this.$store.commit("confirms/remove",this.confirmation.id)}}},r=i(0),a=Object(r.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.confirmation?i("Popup",{attrs:{show:t.show,close:!1,icon:t.confirmation.icon,blog:t.confirmation.blog,title:t.confirmation.message,text:t.confirmation.text},on:{close:t.dismiss,show:t.onShowChange},scopedSlots:t._u([{key:"actions",fn:function(){return[i("Button",{attrs:{label:t.$t("confirms.buttons.dismiss"),rounded:""},on:{click:function(e){return e.stopPropagation(),t.dismiss.apply(null,arguments)}}}),i("Button",{attrs:{label:t.buttonText,color:t.buttonColor,rounded:""},on:{click:function(e){return e.stopPropagation(),t.confirm.apply(null,arguments)}}})]},proxy:!0}],null,!1,1058022776)}):t._e()}),[],!1,null,null,null);e.default=a.exports},954:function(t,e,i){"use strict";i.r(e);var s=i(82),n=i(18),o=(i(1),i(238)),r={extends:s.a,components:{Preloader:n.a},data:function(){return{query:"",touch:{state:!1,delta:0},scrolled:!1,focused:!1}},computed:{list:function(){return this.$store.getters["emojis/list"]},loading:function(){return this.$store.state.emojis.loading},isMobile:function(){var t;return null!=(t=this.$dom)?t.screens.mobile:void 0}},filters:{emoji:function(t){return Object(o.a)(t.position)}},watch:{query:function(){return this.search()},show:function(){if(this.show)return this.query=""}},mounted:function(){return this.fetch()},methods:{fetch:function(){return this.$store.dispatch("emojis/fetch")},search:function(){return this.$store.dispatch("emojis/search",this.query)},input:function(t){return this.$emit("input",t)},close:function(){return this.$emit("close")},onScroll:function(){var t;return this.scrolled=(null!=(t=this.$refs.wrap)?t.scrollTop:void 0)>0},onTouch:function(t){return this.touch.state="end"!==t},onTouchMove:function(t){return this.touch.delta=t}}},a=(i(883),i(0)),l=Object(a.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{"leave-to-class":"m_hidden","enter-class":"m_hidden"},on:{enter:t.place,"before-enter":t.onBeforeShow,"before-appear":t.onBeforeAppear,"before-leave":t.onBeforeLeave,"after-leave":t.onHide}},[t.show?i("div",{staticClass:"emojiPicker",class:t.classess,style:t.style,on:{click:t.clickBackdrop}},[i("div",{staticClass:"emojiPicker__backdrop",on:{click:t.close}}),i("div",{ref:"content",staticClass:"emojiPicker__content",class:{m_focused:t.focused,m_scrolled:t.scrolled,m_touching:t.touch.state},style:{"margin-top":t.touch.state?65+t.touch.delta+"px":null}},[i("div",{directives:[{name:"touch",rawName:"v-touch:swipe.down",value:t.close,expression:"close",arg:"swipe",modifiers:{down:!0}},{name:"touch",rawName:"v-touch:move.down",value:t.onTouchMove,expression:"onTouchMove",arg:"move",modifiers:{down:!0}},{name:"touch",rawName:"v-touch",value:t.onTouch,expression:"onTouch"}],staticClass:"emojiPicker__header"},[i("div",{staticClass:"emojiPicker__header_title",class:{m_hidden:t.scrolled}},[t._v("Add Your Reaction")]),i("div",{staticClass:"emojiPicker__header_scrolltitle",class:{m_hidden:!t.scrolled}},[t._v("Add Your Reaction")])]),i("div",{ref:"wrap",staticClass:"emojiPicker__wrap",on:{"&scroll":function(e){return t.onScroll.apply(null,arguments)}}},[i("div",{staticClass:"emojiPicker__search",class:{m_focused:t.focused}},[i("div",{staticClass:"emojiPicker__search_icon"},[i("Icon",{attrs:{name:"search_small"}})],1),i("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"emojiPicker__search_input",attrs:{type:"text",name:"search",placeholder:t.$t("emojis.search")},domProps:{value:t.query},on:{focus:function(e){t.focused=!0},blur:function(e){t.focused=!1},input:function(e){e.target.composing||(t.query=e.target.value)}}})]),t.loading?i("div",{staticClass:"emojiPicker__loading"},[i("Preloader",{attrs:{central:!0}})],1):i("div",{staticClass:"emojiPicker__list"},t._l(t.list,(function(e){return i("div",{key:e.group||"default",staticClass:"emojiPicker__group"},[e.group?i("div",{staticClass:"emojiPicker__group_name"},[t._v(t._s(t.$t("emojis."+e.group)))]):t._e(),i("div",{staticClass:"emojiPicker__group_items"},t._l(e.items,(function(e){return i("div",{key:e.emoji,staticClass:"emojiPicker__group_item"},[i("div",{staticClass:"emojiPicker__group_emoji",on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.input(e.emoji)}}},[i("div",{staticClass:"emojiPicker__group_glyph",style:t.$options.filters.emoji(e),attrs:{"data-glyph":e.emoji}})])])})),0)])})),0)])])]):t._e()])}),[],!1,null,"0d1e625c",null);e.default=l.exports},959:function(t,e,i){"use strict";i.r(e);var s=i(610).a,n=(i(908),i(0)),o=Object(n.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{show:t.params.open,backdrop:"dark",width:"wide",height:"full",fullscreen:"tablet","position-vertical":"center","position-horizontal":"center"},on:{close:t.close}},[i("div",{staticClass:"settingsPopup"},[i("div",{staticClass:"settingsPopup__nav"},[i("SettingsNav",{attrs:{"blog-id":t.blogId,section:t.section,open:t.nav},on:{toggle:function(e){t.nav=!t.nav},close:t.close}})],1),i("div",{staticClass:"settingsPopup__container"},[i("div",{staticClass:"settingsPopup__aside",class:{m_hidden:!t.nav}},[i("SettingsAside",{attrs:{"blog-id":t.blogId,sections:t.sections,section:t.section},on:{blog:t.changeBlog,section:t.changeSection,logout:t.logout}})],1),i("div",{staticClass:"settingsPopup__content"},[i("div",{staticClass:"settingsPopup__content_wrap"},[i("settings-"+t.section,{tag:"component",attrs:{blog:t.blog},on:{blog:t.changeBlog}})],1)])])])])}),[],!1,null,null,null);e.default=o.exports},960:function(t,e,i){"use strict";i.r(e);var s=i(614).a,n=(i(910),i(0)),o=Object(n.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{show:t.show,backdrop:"dark",width:"form"},on:{close:t.close}},[i("form",{staticClass:"newBlog",on:{submit:t.submit}},[i("button",{staticClass:"newBlog__submit",attrs:{type:"submit",tabindex:"-1"}}),i("div",{staticClass:"newBlog__caption"},[i("div",{staticClass:"newBlog__caption_title"},[t._v(t._s(t.$t("popups.new_blog.title")))]),i("div",{staticClass:"newBlog__caption_close"},[i("IconButton",{attrs:{icon:"close"},on:{click:t.close}})],1)]),i("div",{staticClass:"newBlog__form"},[i("div",{staticClass:"newBlog__field"},[i("Input",{ref:"uri",attrs:{name:"uri",label:t.$t("settings.uri.placeholder"),prefix:t.serviceLink,max:30},on:{change:function(e){return t.uri=e}}}),t.error?i("div",{staticClass:"newBlog__error",domProps:{innerHTML:t._s(t.error)}}):t._e()],1)]),i("div",{staticClass:"newBlog__footer"},[i("Button",{attrs:{type:"filled",rounded:"",label:t.$t("popups.new_blog.done"),loading:t.loading,disabled:!t.loading&&!t.isValid},on:{click:t.submit}})],1)])])}),[],!1,null,"0a13b0dc",null);e.default=o.exports}}]);